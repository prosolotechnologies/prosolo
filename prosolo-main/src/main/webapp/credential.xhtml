<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:comp="http://java.sun.com/jsf/composite/components"
	template="templates/masterLayout2.xhtml"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:dlg="http://java.sun.com/jsf/composite/components/dialogs"
	xmlns:utilcomp="http://java.sun.com/jsf/composite/components/util"
	xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:util="http://www.prosolo.com/util"
	xmlns:courses="http://java.sun.com/jsf/composite/components/courses">

	<ui:define name="windowTitle">
		ProSolo - Credential
	</ui:define>

	<ui:define name="metadata">
		<f:metadata>
			<f:viewParam name="id" value="#{credentialViewBean.id}" default="null" />
			<f:viewParam name="mode" value="#{credentialViewBean.mode}" default="null" />
			<f:viewAction action="#{credentialViewBean.init()}" />
		</f:metadata>
	</ui:define>

    <ui:define name="resourceTitle">
    	<h1>#{credentialViewBean.credentialData.title} #{credentialViewBean.isPreview() ? '(Preview)' : ''}</h1>
    </ui:define>
    
	<ui:define name="content">

	<script src="https://use.typekit.net/zvv0dgl.js"></script>
    <script>try{Typekit.load({ async: true });}catch(e){}</script>
    
     <ui:param name="baseContext" value="name:credential|id:#{credentialViewBean.decodedId}"></ui:param>
     <ui:param name="isCreator" value="#{credentialViewBean.isCurrentUserCreator()}"></ui:param>
     <ui:param name="startedLearning" value="#{credentialViewBean.credentialData.enrolled}"></ui:param>
     <ui:param name="isPreview" value="#{credentialViewBean.isPreview()}"></ui:param>
     
    <h:form id="formMain">
    <p:growl id="growlMain" globalOnly="true" showDetail="true"/> 
    <div class="whiteBar">
        <div class="container">
            <div class="whiteBarContent">
                <div class="whiteBarLeft">
                	<p:commandLink 
                     	rendered="#{!startedLearning and !isPreview}"
                     	styleClass="btn btn-green btn-sm"
                     	action="#{credentialViewBean.enrollInCredential()}"
                     	update=":formMain">
                     	Start
                     	<f:param name="context" value="#{baseContext}" />
                     </p:commandLink>
                     <h:link 
                     	rendered="#{startedLearning and !isPreview}"
                     	styleClass="btn btn-green btn-sm">
                     	Resume
                     </h:link>
                    <h:panelGroup layout="block" rendered="#{startedLearning and !isPreview}" styleClass="progressBar">
                        <span>#{credentialViewBean.credentialData.progress}</span>
                        <div class="progress">
                            <div class="progress-bar" role="progressbar" aria-valuenow="#{credentialViewBean.credentialData.progress}" aria-valuemin="0" aria-valuemax="100" style="width: #{credentialViewBean.credentialData.progress};">
                            </div>
                        </div>
                    </h:panelGroup>
                </div>
                <div class="whiteBarRight">
                    <h:panelGroup rendered="#{credentialViewBean.credentialData.mandatoryFlow}" styleClass="mandatoryTag item">Mandatory flow</h:panelGroup>
                    <div class="duration item">#{credentialViewBean.credentialData.durationString}</div>
                    <h:link 
                    	rendered="#{isCreator and !isPreview}"
                    	outcome="/create-credential" 
                    	styleClass="btn btn-green-stroke btn-sm item">
                    	Edit Credential
                    	<f:param name="id" value="#{param['id']}"></f:param>
                    </h:link>
                </div>
            </div>
        </div>
    </div>

    <div class="container">
        <ol class="breadcrumb">
            <li><a href="#">Credentials</a></li>
            <li class="active">#{credentialViewBean.credentialData.title}</li>
        </ol>
    </div>

    <div class="container">
        <div class="row">
            <div class="col-md-8 mandatoryFlow">
                <h2>About Credential</h2>
                <p>#{credentialViewBean.credentialData.description}</p>
                <courses:compList 
                	bean="#{credentialViewBean}"
                	competences="#{credentialViewBean.credentialData.competences}"
                	isEdit="false"
                	startedLearning="#{startedLearning}"
                	isPreview="#{isPreview}"/>
                <ui:remove><ui:repeat var="comp" value="#{credentialViewBean.credentialData.competences}" varStatus="status">
                	<article class="whiteBox summaryCard summaryCompetence">
                    <div class="innerWrapper">
                        <h2>
                        	<a href="credential.html">
                        		#{comp.title} 
                        		<h:panelGroup rendered="#{!comp.published}">(Draft)</h:panelGroup>
                        	</a>
                        </h2>
                        <h:panelGroup layout="block" styleClass="editOptions" rendered="#{isCreator}">
                            <a href="#" class="linkEdit">Edit</a>
                            <a href="#" class="moveUp" disabled="disabled">up</a>
                            <a href="#" class="moveDown">down</a>
                        </h:panelGroup>
                        <div class="clear"></div>
                        <p>#{comp.description}</p>
                        <div class="metaBox">
                            <div class="metaLeft">
                            	<ui:fragment rendered="#{startedLearning}">
	                            	<h:link 
	                                	rendered="#{comp.progress == 0}"
	                                	styleClass="btn btn-green btn-sm">
	                                	Start
	                                </h:link>
	                                <h:link 
	                                	rendered="#{comp.progress != 0}"
	                                	styleClass="btn btn-green btn-sm">
	                                	Resume
	                                </h:link>
	                            </ui:fragment>
                                <h:panelGroup rendered="#{startedLearning}" styleClass="progressBar">
                                    <span>#{comp.progress}</span>
                                    <div class="progress">
                                        <div class="progress-bar" role="progressbar" aria-valuenow="#{comp.progress}" aria-valuemin="0" aria-valuemax="100" style="width: #{comp.progress}%;">
                                        </div>
                                    </div>
                                </h:panelGroup>
                            </div>
                            <div class="metaRight">
                                <div class="duration">#{comp.durationString}</div>
                            </div>
                        </div>
                    </div>
                    <div class="collapseActivityList">
                        <div id="comp1" class="collapse">
                            <ul>
                            	<ui:repeat var="act" value="#{comp.activities}">
                            		<li class="activityVideo">
	                                    <a href="#">
	                                        <span class="iconType"></span>
	                                        Aliquam vestibulum nulla commodo
	                                        <span class="check"></span>
	                                    </a>
                                	</li>
                            	</ui:repeat>
                                <li class="activityVideo">
                                    <a href="#">
                                        <span class="iconType"></span>
                                        Aliquam vestibulum nulla commodo
                                        <span class="check"></span>
                                    </a>
                                </li>
                                <li class="activityText">
                                    <a href="#">
                                        <span class="iconType"></span>
                                        Class aptent taciti sociosqu ad litora torquent
                                        <span class="check"></span>
                                    </a>
                                </li>
                                <li class="activitySlide">
                                    <a href="#">
                                        <span class="iconType"></span>
                                        Quisque a nisl sed lacus laoreet dapibus
                                        <span class="check"></span>
                                    </a>
                                </li>
                                <li class="activityExternal">
                                    <a href="#">
                                        <span class="iconType"></span>
                                        Cras pellentesque id sapien eu malesuada
                                    </a>
                                </li>
                            </ul>
                        </div>
                        <a href="#comp1" data-toggle="collapse" class="collapseButton collapsed">
                            <span class="textShow">Show Activities</span>
                            <span class="arrowDown">down</span>
                            <span class="textHide">Hide Activities</span>
                            <span class="arrowUp">up</span>
                        </a>
                    </div>
               		</article>
               		<h:panelGroup layout="block" rendered="#{credentialViewBean.hasMoreCompetences(status.index)}" styleClass="mandatoryArrow"></h:panelGroup>
                </ui:repeat>
               
               	<article class="whiteBox summaryCard summaryCompetence">
                    <div class="innerWrapper">
                        <h2><a href="competence.html">Define social network analysis</a></h2>
                        <div class="editOptions">
                            <a href="#" class="linkEdit">Edit</a>
                            <a href="#" class="moveUp" disabled="disabled">up</a>
                            <a href="#" class="moveDown">down</a>
                        </div>
                        <div class="clear"></div>
                        <p>Cras pellentesque id sapien eu malesuada. Aliquam vestibulum nulla commodo purus faucibus, vel feugiat nulla ultrices. Quisque a nisl sed lacus laoreet dapibus. Class aptent taciti sociosqu…</p>
                        <div class="metaBox">
                            <div class="metaLeft">
                          		<ui:fragment rendered="#{startedLearning}">
	                            	<h:link 
	                                	rendered="#{comp.progress == 0}"
	                                	styleClass="btn btn-green btn-sm">
	                                	Start
	                                </h:link>
	                                <h:link 
	                                	rendered="#{comp.progress != 0}"
	                                	styleClass="btn btn-green btn-sm">
	                                	Resume
	                                </h:link>
	                            </ui:fragment>
                                <h:panelGroup rendered="#{startedLearning}" styleClass="progressBar">
                                    <span>70%</span>
                                    <div class="progress">
                                        <div class="progress-bar" role="progressbar" aria-valuenow="70" aria-valuemin="0" aria-valuemax="100" style="width: 70%;">
                                        </div>
                                    </div>
                                </h:panelGroup>
                            </div>
                            <div class="metaRight">
                                <div class="duration">35 minutes</div>
                            </div>
                        </div>
                    </div>
                    <div class="collapseActivityList">
                        <div id="comp1" class="collapse">
                            <ul>
                                <li class="activityVideo">
                                    <a href="#">
                                        <span class="iconType"></span>
                                        Aliquam vestibulum nulla commodo
                                        <span class="check"></span>
                                    </a>
                                </li>
                                <li class="activityText">
                                    <a href="#">
                                        <span class="iconType"></span>
                                        Class aptent taciti sociosqu ad litora torquent
                                        <span class="check"></span>
                                    </a>
                                </li>
                                <li class="activitySlide">
                                    <a href="#">
                                        <span class="iconType"></span>
                                        Quisque a nisl sed lacus laoreet dapibus
                                        <span class="check"></span>
                                    </a>
                                </li>
                                <li class="activityExternal">
                                    <a href="#">
                                        <span class="iconType"></span>
                                        Cras pellentesque id sapien eu malesuada
                                    </a>
                                </li>
                            </ul>
                        </div>
                        <a href="#comp1" data-toggle="collapse" class="collapseButton collapsed">
                            <span class="textShow">Show Activities</span>
                            <span class="arrowDown">down</span>
                            <span class="textHide">Hide Activities</span>
                            <span class="arrowUp">up</span>
                        </a>
                    </div>
                </article>
                <div class="mandatoryArrow"></div>
                <article class="whiteBox summaryCard summaryCompetence">
                    <div class="innerWrapper">
                        <h2><a href="competence.html">Define social network analysis</a></h2>
                        <div class="editOptions">
                            <a href="#" class="linkEdit">Edit</a>
                            <a href="#" class="moveUp">up</a>
                            <a href="#" class="moveDown" disabled="disabled">down</a>
                        </div>
                        <div class="clear"></div>
                        <p>Cras pellentesque id sapien eu malesuada. Aliquam vestibulum nulla commodo purus faucibus, vel feugiat nulla ultrices. Quisque a nisl sed lacus laoreet dapibus. Class aptent taciti sociosqu…</p>
                        <div class="metaBox">
                            <div class="metaLeft">
                                <a href="#" class="btn btn-green btn-sm" disabled="disabled" data-toggle="tooltip" title="In order to start this competence, previous tasks need to be completed.">Start</a>
                            </div>
                            <div class="metaRight">
                                <div class="duration">35 minutes</div>
                            </div>
                        </div>
                    </div>
                    <div class="collapseActivityList">
                        <div id="comp2" class="collapse">
                            <ul>
                                <li class="activityVideo">
                                    <a href="#">
                                        <span class="iconType"></span>
                                        Aliquam vestibulum nulla commodo
                                    </a>
                                </li>
                                <li class="activityText">
                                    <a href="#">
                                        <span class="iconType"></span>
                                        Class aptent taciti sociosqu ad litora torquent
                                    </a>
                                </li>
                                <li class="activitySlide">
                                    <a href="#">
                                        <span class="iconType"></span>
                                        Quisque a nisl sed lacus laoreet dapibus
                                    </a>
                                </li>
                                <li class="activityExternal">
                                    <a href="#">
                                        <span class="iconType"></span>
                                        Cras pellentesque id sapien eu malesuada
                                    </a>
                                </li>
                            </ul>
                        </div>
                        <a href="#comp2" data-toggle="collapse" class="collapseButton collapsed">
                            <span class="textShow">Show Activities</span>
                            <span class="arrowDown">down</span>
                            <span class="textHide">Hide Activities</span>
                            <span class="arrowUp">up</span>
                        </a>
                    </div>
                </article></ui:remove>
            </div>
            <div class="col-md-4">
                <h2>Keywords</h2>
                <ul class="tags">
                	<ui:repeat var="tag" value="#{credentialViewBean.credentialData.tags}">
                		<li><a href="#">#{tag.title}</a></li>
                	</ui:repeat>
                </ul>
                <h2>Twitter hashtags</h2>
                <ul class="tags">
                	<ui:repeat var="hashtag" value="#{credentialViewBean.credentialData.hashtags}">
                		<li><a href="#">#{hashtag.title}</a></li>
                	</ui:repeat>
                </ul>
                <h2>Created by</h2>
                <div class="user32">
                    <a href="#">
                    	<h:graphicImage value="#{credentialViewBean.credentialData.creator.avatar}"
										   alt="#{credentialViewBean.credentialData.creator.name}" 
										   styleClass="img-circle"
										   width="32" height="32"/>              
                    </a>
                    <h3><a href="#">#{credentialViewBean.credentialData.creator.name}</a></h3>
                </div>
            </div>
        </div>

    </div>
	</h:form>

    <ui:remove><script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script></ui:remove>

</ui:define>
</ui:composition>
