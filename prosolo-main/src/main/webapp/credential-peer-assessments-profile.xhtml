<ui:composition xmlns="http://www.w3.org/1999/xhtml"
				xmlns:h="http://java.sun.com/jsf/html"
				xmlns:f="http://java.sun.com/jsf/core"
				xmlns:ui="http://java.sun.com/jsf/facelets"
				template="templates/masterLayout2.xhtml"
				xmlns:credential="http://java.sun.com/jsf/composite/components/courses"
				xmlns:assessment="http://java.sun.com/jsf/composite/components/assessments"
				xmlns:utilcomp="http://java.sun.com/jsf/composite/components/util"
				xmlns:util="http://www.prosolo.com/util"
				xmlns:p="http://primefaces.org/ui"
				xmlns:pt="http://xmlns.jcp.org/jsf/passthrough">

	<ui:define name="windowTitle">
		Assessments - #{credentialPeerAssessmentsBeanPublic.credentialTitle} - ProSolo
	</ui:define>

	<ui:define name="metadata">
		<f:metadata>
			<f:viewParam name="p" value="#{credentialPeerAssessmentsBeanPublic.page}" default="1" />
			<f:viewParam name="credId" value="#{credentialPeerAssessmentsBeanPublic.id}" default="null" />
			<f:viewParam name="studentId" value="#{credentialPeerAssessmentsBeanPublic.studId}" default="null"/>
			<f:viewAction action="#{credentialPeerAssessmentsBeanPublic.init()}" />
		</f:metadata>
	</ui:define>

    <ui:define name="resourceTitle">
		<h1>#{credentialPeerAssessmentsBeanPublic.credentialTitle}</h1>
    </ui:define>

	<ui:define name="navLinks">
		<credential:credentialStudentNavLinksPublic
				credId="#{credentialPeerAssessmentsBeanPublic.decodedId}"
				studentId="#{credentialPeerAssessmentsBeanPublic.decodedStudentId}"
				displayAssessments="#{true}"
		/>
	</ui:define>
    
	<ui:define name="content">

		<p:growl id="growlMain" globalOnly="true" showDetail="true" />

		<div class="whiteBar">

		</div>

		<div class="container">
			<ol class="breadcrumb">
				<ui:fragment rendered="#{credentialPeerAssessmentsBeanPublic.peerAssessmentBlindAssessmentMode eq 'OFF'}">
					<li>
						<h:link value="#{util:shortenAndAddDots(credentialPeerAssessmentsBeanPublic.student.fullName)}" outcome="profile">
							<f:param name="id" value="#{param.studentId}"/>
						</h:link>
					</li>
				</ui:fragment>
				<li>
					<h:link value="#{util:shortenAndAddDots(credentialPeerAssessmentsBeanPublic.credentialTitle)}" outcome="/public-credential">
						<f:param name="credId" value="#{param.credId}"/>
						<f:param name="studentId" value="#{param.studentId}"/>
					</h:link>
				</li>
				<li class="active">Assessments</li>
			</ol>
		</div>

		<div class="container">
			<div class="row">
				<div class="col-md-12">
					<assessment:credentialAssessmentStudentTabsPublic
							encodedCredId="#{param.credId}"
							encodedStudentId="#{param.studentId}"
							peerAssessmentEnabled="#{credentialPeerAssessmentsBeanPublic.peerAssessmentEnabled}"
							selfAssessmentEnabled="#{credentialPeerAssessmentsBeanPublic.selfAssessmentEnabled}"
					/>

					<div class="assessmentsTab" id="peer">
						<div class="row">
							<div class="col-md-12">
								<h:panelGroup id="panelAssessments">
									<ui:fragment rendered="#{empty credentialPeerAssessmentsBeanPublic.assessments}">
										<div class="noContentMessage">
											<p>
												No assessments.
											</p>
										</div>
									</ui:fragment>


									<ui:repeat var="assessment" value="#{credentialPeerAssessmentsBeanPublic.assessments}">
										<div class="whiteBox assessmentsBox">
											<div class="assessmentsBoxTop">
												<div class="user32">
													<h:link outcome="/credential-assessment-profile">
														<assessment:assessmentActorAvatar
																actorId="#{assessment.assessorId}"
																avatarUrl="#{assessment.assessorAvatarUrl}"
																actorFullName="#{assessment.assessorFullName}"
																blindAssessmentMode="#{credentialPeerAssessmentsBeanPublic.peerAssessmentBlindAssessmentMode}"
																actorType="ASSESSOR"
														/>
														<f:param value="#{util:encodeId(assessment.assessmentId)}" name="assessmentId" />
														<f:param value="#{param.credId}" name="credId" />
														<f:param value="#{param.studentId}" name="studentId"/>
													</h:link>

													<h3>
														<h:link outcome="/credential-assessment-profile">
															<assessment:assessmentActorName
																	actorId="#{assessment.assessorId}"
																	actorFullName="#{assessment.assessorFullName}"
																	blindAssessmentMode="#{credentialPeerAssessmentsBeanPublic.peerAssessmentBlindAssessmentMode}"
																	actorType="ASSESSOR"
															/>
															<f:param value="#{util:encodeId(assessment.assessmentId)}" name="assessmentId" />
															<f:param value="#{param.credId}" name="credId" />
															<f:param value="#{param.studentId}" name="studentId"/>
														</h:link>
													</h3>
												</div>
												<div class="timestamp">
													#{assessment.dateValue}
												</div>
											</div>
											<h:panelGroup layout="block" styleClass="tagApproved left bottom30" rendered="#{assessment.approved}">Approved</h:panelGroup>
											<h:link outcome="/credential-assessment-profile">
												View Details
												<f:param value="#{util:encodeId(assessment.assessmentId)}" name="assessmentId" />
												<f:param value="#{param.credId}" name="credId" />
												<f:param value="#{param.studentId}" name="studentId"/>
											</h:link>
										</div>
									</ui:repeat>
								</h:panelGroup>

								<utilcomp:pagination
										id="pagination"
										bean="#{credentialPeerAssessmentsBeanPublic}"
										updateUrl="true"
										toUpdate=":panelAssessments"
								/>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>

	</ui:define>
</ui:composition>