<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:comp="http://java.sun.com/jsf/composite/components"
	template="templates/masterLayout2.xhtml"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:dlg="http://java.sun.com/jsf/composite/components/dialogs"
	xmlns:utilcomp="http://java.sun.com/jsf/composite/components/util"
	xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:util="http://www.prosolo.com/util"
	xmlns:courses="http://java.sun.com/jsf/composite/components/courses">

	<ui:define name="windowTitle">
		ProSolo - #{activityEditBean.pageHeaderTitle}
	</ui:define>

	<ui:define name="metadata">
		<f:metadata>
			<f:viewParam name="id" value="#{activityEditBean.id}" default="null" />
			<f:viewParam name="compId" value="#{activityEditBean.compId}" default="null"/>
			<f:viewAction action="#{activityEditBean.init()}" />
		</f:metadata>
	</ui:define>

    <ui:define name="resourceTitle">
    	<h:panelGroup id="panelTitle">
	    	<h1>#{activityEditBean.pageHeaderTitle}
	    		<h:panelGroup rendered="#{activityEditBean.activityData.activityId > 0 and !activityEditBean.activityData.published}">
	    			(Draft)
	    		</h:panelGroup>
	    	</h1>
	    </h:panelGroup>
    </ui:define>
    
	<ui:define name="content">

	<script src="https://use.typekit.net/zvv0dgl.js"></script>
    <script>try{Typekit.load({ async: true });}catch(e){}</script>
    <div class="whiteBar">

    </div>
	
	<h:form id="formMain" enctype="multipart/form-data">
	<p:growl id="growlMain" globalOnly="true" showDetail="true"/>
    <div class="container">
        <div class="row">
            <div class="col-md-8">
                <div class="tab-content">
                    <div role="tabpanel" class="tab-pane fade in active" id="info">
                        <div class="whiteBox">
                            <h2>Activity Info</h2>
                            <div class="formWrapper">
                                <div class="formLine">
                                    <label>Parent competence</label>
                                    <div class="formLineRight">
                                        <ui:remove><select class="selectpicker">
                                            <option>Select Competence</option>
                                        </select></ui:remove>
                                        <span>#{activityEditBean.activityData.competenceName}</span>
                                    </div>
                                </div>
                                <div class="formLine">
                                    <label>Title</label>
                                    <div class="formLineRight">
                                    	<h:inputText 
                                    		value="#{activityEditBean.activityData.title}">
                                    	</h:inputText>
                                    </div>
                                </div>
                                <div class="formLine">
                                    <label>Description</label>
                                    <div class="formLineRight">
                                    	<h:inputTextarea
                                    		value="#{activityEditBean.activityData.description}">
                                    	</h:inputTextarea>
                                    </div>
                                </div>
                                <div class="formLine">
                                    <label>Activity type</label>
                                    <h:panelGroup 
                                    	layout="block" 
                                    	id="panelSelectActivity" 
                                    	styleClass="formLineRight"
                                    	rendered="#{activityEditBean.isCreateUseCase()}">
                                        <ul class="nav nav-tabs innerSubmenu" role="tablist">
                                        	<ui:repeat var="type" value="#{activityEditBean.activityTypes}">
                                        		<li role="presentation" class="#{activityEditBean.isActivityTypeSelected(type) ? 'active' : ''}">
                                        			<p:commandLink 
                           								value="#{type.label}"
                                        				pt:aria-controls="activities" 
                                        				pt:role="tab" 
                                        				pt:data-toggle="tab"
                                        				process="@this"
                                        				action="#{activityEditBean.updateType(type)}"
                                        				update=":formMain:panelSelectActivity :formMain:activityPanel">
                                        			</p:commandLink>
                                        		</li>
                                        	</ui:repeat>   
                                        </ul>
                                    </h:panelGroup>
                                    <h:panelGroup 
                                    	layout="block" 
                                    	id="panelActivityType" 
                                    	styleClass="formLineRight"
                                    	rendered="#{!activityEditBean.isCreateUseCase()}">
                                         <ul class="addedItems">
                                             <li>
                                                 #{activityEditBean.activityData.activityType.label}
                                             </li>
                                         </ul>        
                                    </h:panelGroup>
                                </div>
                                
                                <courses:activityCreateComp
                                	id="activityPanel"
                                	activity="#{activityEditBean.activityData}"
                                	bean="#{activityEditBean}"
                                />
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="whiteBox publishBox">
                    <h2>Publish</h2>
                    <a href="#" class="linkPreview">Preview</a>
                    <div class="clear"></div>
                    <div class="estimatedTime">
                        <p>Estimated time to complete:</p>
                        <div class="selectRow">
                        	<h:selectOneMenu styleClass="selectpicker pickHours"
                        		value="#{activityEditBean.activityData.durationHours}">
                        		<f:selectItem itemValue="0"/>
                        		<f:selectItem itemValue="1"/>
                        		<f:selectItem itemValue="2"/>
                        		<f:selectItem itemValue="3"/>
                        		<f:selectItem itemValue="4"/>
                        		<f:selectItem itemValue="5"/>
                        		<f:selectItem itemValue="6"/>
                        		<f:selectItem itemValue="7"/>
                        		<f:selectItem itemValue="8"/>
                        		<f:selectItem itemValue="9"/>
                        		<f:selectItem itemValue="10"/>
                        		<f:selectItem itemValue="11"/>
                        		<f:selectItem itemValue="12"/>
                        	</h:selectOneMenu>
                            <p>hours</p>
                            <h:selectOneMenu styleClass="selectpicker pickMinutes"
                        		value="#{activityEditBean.activityData.durationMinutes}">
                        		<f:selectItem itemValue="0"/>
                        		<f:selectItem itemValue="5"/>
                        		<f:selectItem itemValue="10"/>
                        		<f:selectItem itemValue="15"/>
                        		<f:selectItem itemValue="20"/>
                        		<f:selectItem itemValue="25"/>
                        		<f:selectItem itemValue="30"/>
                        		<f:selectItem itemValue="35"/>
                        		<f:selectItem itemValue="40"/>
                        		<f:selectItem itemValue="45"/>
                        		<f:selectItem itemValue="50"/>
                        		<f:selectItem itemValue="55"/>
                        	</h:selectOneMenu>
                            <p>minutes</p>
                        </div>
                        <script>$('.selectpicker').selectpicker('refresh');</script>
                    </div>
                    <h:selectOneMenu 
	                	styleClass="selectpicker"
	               		value="#{activityEditBean.activityData.status}">
	               		<f:selectItems value="#{activityEditBean.actStatusArray}" var="status"
    						itemValue="#{status}" itemLabel="#{status.label}" />
	                </h:selectOneMenu>
          
                    <div class="publishRow">
                    	<p:commandLink 
		              	  	styleClass="btn btn-green" 
		              	  	action="#{activityEditBean.save()}"
		              	  	update=":formMain :panelTitle">
		              	  		Save changes
		              	</p:commandLink>
                        <a href="#" class="linkRed" data-toggle="modal" data-target="#deleteModal">Delete</a>
                        
                    </div>
                </div>
            </div>
        </div>
    </div>
    </h:form>
    
     <courses:deleteModalDialog          	
            		deleteAction="#{activityEditBean.delete}"
            		toUpdate=":formMain :panelTitle" 
            		modalDeleteTitle="Activity"
            		modalDeleteText="activity"/>
</ui:define>
</ui:composition>
