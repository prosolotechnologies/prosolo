<ui:composition xmlns="http://www.w3.org/1999/xhtml"
				xmlns:h="http://java.sun.com/jsf/html"
				xmlns:f="http://java.sun.com/jsf/core"
				xmlns:ui="http://java.sun.com/jsf/facelets"
				template="templates/masterLayout2.xhtml"
				xmlns:assessment="http://java.sun.com/jsf/composite/components/assessments"
				xmlns:utilcomp="http://java.sun.com/jsf/composite/components/util"
				xmlns:util="http://www.prosolo.com/util"
				xmlns:p="http://primefaces.org/ui"
>

	<ui:define name="windowTitle">
		Assessments - #{profileCompetencePeerAssessmentsBean.competenceTitle} - ProSolo
	</ui:define>

	<ui:define name="metadata">
		<f:metadata>
			<f:viewParam name="p" value="#{profileCompetencePeerAssessmentsBean.page}" default="1" />
			<f:viewParam name="compId" value="#{profileCompetencePeerAssessmentsBean.compId}" default="null" />
			<f:viewParam name="studentId" value="#{profileCompetencePeerAssessmentsBean.studId}" default="null" />
			<f:viewAction action="#{profileCompetencePeerAssessmentsBean.init()}" />
		</f:metadata>
	</ui:define>

    <ui:define name="resourceTitle">
		<h1>#{profileCompetencePeerAssessmentsBean.competenceTitle}</h1>
    </ui:define>

	<ui:define name="navLinks">

	</ui:define>
    
	<ui:define name="content">

		<p:growl id="growlMain" globalOnly="true" showDetail="true" />

		<div class="whiteBar">

		</div>

		<div class="container">
			<ol class="breadcrumb">
				<li>
					<h:link value="#{profileCompetencePeerAssessmentsBean.student.fullName}" outcome="profile">
						<f:param name="id" value="#{param.studentId}"/>
					</h:link>
				</li>
				<li class="active">
					Assessments
				</li>
			</ol>
		</div>

		<div class="container">
			<div class="row">
				<div class="col-md-12">
					<assessment:competenceAssessmentStudentTabsProfile
							selfAssessmentEnabled="#{profileCompetencePeerAssessmentsBean.selfAssessmentEnabled}"
							peerAssessmentEnabled="#{profileCompetencePeerAssessmentsBean.peerAssessmentEnabled}"
					/>

					<div class="assessmentsTab" id="peer">
						<div class="row">
							<div class="col-md-12">
								<h:panelGroup id="panelAssessments">
									<ui:fragment rendered="#{empty profileCompetencePeerAssessmentsBean.assessments}">
										<div class="noContentMessage">
											<p>
												No assessments.
											</p>
										</div>
									</ui:fragment>


									<ui:repeat var="assessment" value="#{profileCompetencePeerAssessmentsBean.assessments}">
										<div class="whiteBox assessmentsBox">
											<div class="assessmentsBoxTop">
												<div class="user32">
													<h:link outcome="/competence-peer-assessment-profile">
														<utilcomp:userAvatar avatar="#{assessment.assessorAvatarUrl}" fullName="#{assessment.assessorFullName}"/>
														<f:param value="#{util:encodeId(assessment.assessmentId)}" name="assessmentId"/>
														<f:param value="#{param.compId}" name="compId"/>
														<f:param value="#{param.studentId}" name="studentId"/>
													</h:link>

													<h3>
														<h:link outcome="/competence-peer-assessment-profile">
															#{assessment.assessorFullName}
															<f:param value="#{util:encodeId(assessment.assessmentId)}" name="assessmentId"/>
															<f:param value="#{param.compId}" name="compId"/>
															<f:param value="#{param.studentId}" name="studentId"/>
														</h:link>
													</h3>
												</div>
												<div class="timestamp">
													#{assessment.dateValue}
												</div>
											</div>
											<h:panelGroup layout="block" styleClass="tagApproved left bottom30" rendered="#{assessment.approved}">Approved</h:panelGroup>
											<h:link outcome="/competence-peer-assessment-profile">
												View Details
												<f:param value="#{util:encodeId(assessment.assessmentId)}" name="assessmentId" />
												<f:param value="#{param.compId}" name="compId" />
												<f:param value="#{param.studentId}" name="studentId"/>
											</h:link>
										</div>
									</ui:repeat>
								</h:panelGroup>

								<utilcomp:pagination
										id="pagination"
										bean="#{profileCompetencePeerAssessmentsBean}"
										updateUrl="true"
										toUpdate=":panelAssessments"
								/>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>

		<h:form id="formAskForAssessment">
			<assessment:askForAssessment
					id="askForAssessment"
					bean="#{askForCompetenceAssessmentBean}"
					submitAssessmentRequestActionMethodName="submitAssessment"
					submitAssessmentRequestAction="#{studentCompetencePeerAssessmentsBean.submitAssessment}"
					resource="COMPETENCE"
					resourceTitle="#{studentCompetencePeerAssessmentsBean.competenceTitle}"
					toUpdate=":growlMain :panelAssessments :pagination"
					learningContext="name:competence|id:#{util:decodeId(param.compId)}"
			/>
		</h:form>
	</ui:define>
</ui:composition>