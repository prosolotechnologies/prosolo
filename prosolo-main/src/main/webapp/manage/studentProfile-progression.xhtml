<ui:composition
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">

	<style>
		.slick-slide{
			width: 180px;
		}
	</style>
	
	<div role="tabpanel" id="progression" class="tab-pane fade in active">
		<div class="whiteBox">
           <h:panelGroup layout="block" id="svgContainer">
				<ui:remove><script>
				if (typeof (drawTreePath) == "function"){
					drawTreePath();
				}
				</script></ui:remove>
			</h:panelGroup>

           <h2>Credentials</h2>
           <div class="blockRow" id="credentials" style="display: none;">
           	   <p:commandLink styleClass="sliderIconLeft"
					update=":svgContainer">
					<i class="fa fa-angle-left"></i>
			   </p:commandLink>
				   <ui:repeat var="cred" value="#{studentProfileBean.credentials}">
					
						<p:commandLink
							styleClass="progressBlock #{cred.id == studentProfileBean.selectedCredential.id ? 'selected' : ''}"
							action="#{studentProfileBean.selectCredential(cred)}"
							update=":competencesBlock :activitiesBlock :svgContainer"
							onclick="$('#credentials .progressBlock').removeClass('selected');$(this).addClass('selected');">
		
							<div class="progress">
								<div class="progression bgGreen"
									style="height: #{cred.progress}%"></div>
								<div class="progressMask"></div>
								<div class="percentage">#{cred.progress}%</div>
							</div>
							<h3>#{cred.name}</h3>
						</p:commandLink>
					</ui:repeat>
		
			   <p:commandLink styleClass="sliderIconRight"
					update=":svgContainer">
					<i class="fa fa-angle-right"></i>
			   </p:commandLink>
               <div class="clear"></div>
               
               <script>
					$(function(){
						//initCredentialsSlider();
						$('#credentials').fadeIn();
					});
			   </script>
           </div>

           <h2>Competences</h2>
           <h:panelGroup layout="block" styleClass="blockRow" id="competencesBlock" style="display: none;">
           	   <p:commandLink styleClass="sliderIconLeftCred"
					update=":svgContainer">
					<i class="fa fa-angle-left"></i>
			   </p:commandLink>
			   
				   <ui:repeat var="comp" value="#{studentProfileBean.selectedCredential.competences}">
		
						<ui:remove><h:panelGroup layout="block" id="competencePanel"
							styleClass="progressBlock competence #{comp.id == studentProfileBean.selectedCredential.selectedCompetence.id ? 'selected' : ''}"></h:panelGroup></ui:remove>
							
							<p:commandLink
								styleClass="progressBlock competence #{comp.id == studentProfileBean.selectedCredential.selectedCompetence.id ? 'selected' : ''}"
								onclick="$('#competencesBlock .progressBlock').removeClass('selected');$(this).addClass('selected');"
								action="#{studentProfileBean.selectCompetence(comp)}"
								update=":activitiesBlock :svgContainer">
			
								<div class="progress">
									<div class="progression bgBlue" style="height: #{comp.progress}%"></div>
									<div class="progressMask"></div>
									<div class="percentage">#{comp.progress}%</div>
								</div>
								
								<h3>#{comp.name}</h3>
							</p:commandLink>			
						<ui:remove><h:panelGroup></h:panelGroup></ui:remove>
					</ui:repeat>
              
                <p:commandLink styleClass="sliderIconRightCred"
					update=":svgContainer">
					<i class="fa fa-angle-right"></i>
				</p:commandLink>
               <div class="clear"></div>
               
               <script>
				$(function(){
					//initCompetenceSlider();
					$('#competencesBlock').fadeIn();
				});
			   </script>
           </h:panelGroup>

           <h2>Activities</h2>
           <h:panelGroup layout="block" styleClass="activitiesBlock" id="activitiesBlock" style="display: none;">
           		
          	<div class="activitiesBlockLeft">
          	  	<ui:repeat var="act" value="#{studentProfileBean.selectedCredential.selectedCompetence.activities}">
					<h3 class="#{styleUtilBean.getStyleClassBasedOnActivityType(act.type)}" id="act#{act.id}"
						onclick="selectActivity(#{act.id});">
	                    <a href="javascript:void(0);">
	                        <span class="#{act.completed ? 'check' : 'iconType'}"></span>
	                        #{act.name}
	                    </a>
	                </h3>	
				</ui:repeat>  
            </div>
            <div class="activitiesBlockRight">
                <div class="graph">
                    <div id="quadrantchart">
						<script>
						    var service = "#{studentProfileBean.completedActivitiesServicePath}";
							drawQuadrantChart(service);
						</script>
					</div>
                </div>
            </div>
           	  
               <div class="clear"></div>
               
               <script>
				$(function(){
					$('#activitiesBlock').fadeIn();
				});
			   </script>
           </h:panelGroup>
           <div class="clear" style="height:1px;"></div>
       </div>
	</div>
</ui:composition>