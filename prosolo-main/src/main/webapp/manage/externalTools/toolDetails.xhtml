<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	template="../templates/masterLayout.xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:utilcomp="http://java.sun.com/jsf/composite/components/util">

<ui:define name="windowTitle">
	<utilcomp:messagesBundle var="msg" />

	#{msg['manager.courses.pageTitle.createOrganizationalCourse']}
</ui:define>

<ui:define name="metadata">
	<f:metadata>
		<f:viewParam name="cred" value="#{extenalToolDetailsBean.cred}" default="0"/>
		<f:viewParam name="comp" value="#{extenalToolDetailsBean.comp}" default="0"/>
		<f:viewParam name="act" value="#{extenalToolDetailsBean.act}" default="0"/>
		<f:viewParam name="id" value="#{extenalToolDetailsBean.id}" default="0" />
		<f:viewAction action="#{extenalToolDetailsBean.init()}"/>
	</f:metadata>
</ui:define>

<ui:define name="content">
	<utilcomp:messagesBundle var="msg" />
	
	<div id="externalToolDetails" class="container">
		<div class="content wide">
			
			<h2 class="left heading">
				Edit external tool
			</h2>
			<div class="clear"></div>
			
			<h:form id="toolForm" class="wideForm">
				<p:growl id="toolFormGrowl" showDetail="true" />
				<div class="leftContainer">
					<table>
						<tr>
							<td class="col1"><label for="name">Title:</label></td>
							<td>
								<h:inputText id="name" class="title" value="#{extenalToolDetailsBean.toolData.title}"
									placeholder="#{msg['textfield.title']}"/>
							</td>
						</tr>
						<tr class="description">
							<td class="label top col1">
								<label for="description">Description:</label>
							</td>
							<td>
								<h:inputTextarea id="description"
									value="#{extenalToolDetailsBean.toolData.description}"
									placeholder="#{msg['textarea.description']}" />
							</td>
						</tr>
					</table>
					<div class="clear"></div>
					
					<div class="actions">
						<p:commandLink value="Save"
							styleClass="button green size30 left"
						 	action="#{extenalToolDetailsBean.save}"
						 	update=":toolForm:toolFormGrowl :toolForm:consumerConfig">
						</p:commandLink>
						
						&#160;
						<h:link value="Cancel" styleClass="button gray size30 left"
							outcome="#{empty param['origin'] ? '/manage/courses' : param['origin']}" />
					</div>
				</div>
				
				<h:panelGroup id="consumerConfig">
				<div class="rightContainer">
					<h3>Configuration details</h3>
					
					<h4>LTI 1</h4>
						<table>
							<tr>
								<td class="col1">Launch URL:</td>
								<td>#{extenalToolDetailsBean.toolData.launchUrl}</td>
							</tr>
							<tr>
								<td class="col1">Consumer key:</td>
								<td>#{extenalToolDetailsBean.toolData.consumerKey}</td>
							</tr>
							<tr>
								<td class="col1">Shared secret:</td>
								<td>#{extenalToolDetailsBean.toolData.consumerSecret}</td>
							</tr>
						</table>
					
					<h4>LTI 2</h4>
						<table>
							<tr>
								<td class="col1">Registration URL:</td>
								<td>#{extenalToolDetailsBean.toolData.regUrl}</td>
							</tr>
						</table>
				</div>
				</h:panelGroup>
				
				<script>
				$(function() {
					$('#externalToolDetails tr.description textarea').autosize();
					$('#externalToolDetails .title').focus();
				});
				</script>
			</h:form>
		</div><!-- .content -->
	</div><!-- .container end -->

</ui:define>
</ui:composition>