<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:comp="http://java.sun.com/jsf/composite/components"
	template="templates/masterLayout1.xhtml"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:dlg="http://java.sun.com/jsf/composite/components/dialogs"
	xmlns:actions="http://java.sun.com/jsf/composite/components/actions"
	xmlns:utilcomp="http://java.sun.com/jsf/composite/components/util"
	xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:util="http://www.prosolo.com/util"
	xmlns:dlgComp="http://java.sun.com/jsf/composite/components/dialogs/manager"
	xmlns:mngComp="http://java.sun.com/jsf/composite/components/manage">

<ui:define name="windowTitle">
	Competences
</ui:define>

<ui:define name="metadata">
	<f:metadata>
		<f:viewParam name="compId" value="#{competenceOverallBean.id}" default="null" />
		<f:viewParam name="origin" default="null"/>
		<f:viewAction action="#{competenceOverallBean.init()}"/>
	</f:metadata>
</ui:define>

<ui:define name="content">
	<h:form id="formMain">
		<p:growl showDetail="true" />
		
		<mngComp:competenceHeader id="competenceHeader"
	       	competenceName="#{competenceOverallBean.compData.title}"
	       	competenceEncodedId="#{param['compId']}"
	       	activeLink="Overall"
	       	origin="#{empty param['origin'] ? '/manage/competences' : param['origin']}" />
		
		<section>
			<div class="subHeader">
				<h3 class="title">Overall</h3>
				
				<h:link
					pt:role="button"
					styleClass="btn btn-default panelButton pull-right"
					outcome="#{empty param['origin'] ? '/manage/competences' : param['origin']}">
					<i class="fa fa-ban red"></i> Cancel
				</h:link>
				
				<p:commandLink
					action="#{competenceOverallBean.updateCompetence()}"
					update=":formMain"
					oncomplete="initializePageJS();"
					pt:role="button"
					styleClass="btn btn-primary panelButton pull-right">
					<i class="fa fa-save"></i> Save	
				</p:commandLink>
			</div>
		</section>
		
		<section class="container-fluid mainArea fullWidth">
			<div class="row fullWidthPanel">
				<div class="col-md-10 indexColumn">
					<div class="tab-content centerTabs">
						<div class="row">
							<div class="col-md-6">
								<div class="form-group">
									<label for="">Title</label>
									<h:inputText styleClass="form-control" value="#{competenceOverallBean.compData.title}"/>
								</div>
								
								<div class="form-group">
									<label for="">Description</label>
									<h:inputTextarea styleClass="form-control" rows="5" value="#{competenceOverallBean.compData.description}"></h:inputTextarea>
								</div>                
							</div>
	
							<div class="col-md-6">
								<div class="row">
									<div class="col-md-6">
										<div class="form-group inlineSelect">
											<label>Validity</label>
											
											<h:selectOneMenu
												value="#{competenceOverallBean.compData.validity}"
												styleClass="form-control selectpicker">
												<f:selectItems 
													value="#{competenceOverallBean.validityOptions}"
													var="validity"
													itemValue="#{validity}" />
											</h:selectOneMenu>
										</div>
										
										<span class="inline">Month(s)</span>
									</div>
	
									<div class="col-md-6">
										<div class="form-group inlineSelect">
											<label>Duration</label>
											
											<h:selectOneMenu
												value="#{competenceOverallBean.compData.duration}"
												styleClass="form-control selectpicker">
												<f:selectItems 
													value="#{competenceOverallBean.durationOptions}" 
													var="duration"
													itemValue="#{duration}" />
											 </h:selectOneMenu>
										</div>
										
										<span class="inline">Day(s)</span>
									</div>
								</div>
							</div>
		               
							<div class="col-md-6">
								<div class="form-group">
									<label for="">Keywords</label>
									<h:inputText styleClass="tags" value="#{competenceOverallBean.compData.tagsString}" />
								</div>              
							</div>
						</div>
					</div>
				</div>
		      
				<mngComp:publishedStatus id="publishedStatus"
					values="#{competenceOverallBean.statusArray}"
					value="#{competenceOverallBean.compData.status}"/>
			</div>
		</section>
		
		<script>
		$('.form-group .tags').tags({
			editMode : true
		});
		</script>
	</h:form>
		
	<h:outputScript library="javascript" name="prosolo.tags.js" target="head" />
	<script src="#{request.contextPath}/manage/js/credentialsOverall.js"></script>
	
</ui:define>
</ui:composition>