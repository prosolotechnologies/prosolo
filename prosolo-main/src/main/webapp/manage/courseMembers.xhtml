<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	template="templates/masterLayout.xhtml"
	xmlns:dlg="http://java.sun.com/jsf/composite/components/admin/dialogs"
	xmlns:util="http://www.prosolo.com/util">

<ui:define name="windowTitle">
	Course members
</ui:define>

<ui:define name="metadata">
	<f:metadata>
		<f:viewParam name="id" value="#{courseMembersBean.id}" default="null"/>
		<f:viewAction action="#{courseMembersBean.init()}" />
	</f:metadata>
</ui:define>

<ui:define name="content">

	<div class="container admin">
		<div id="usersFormContainer" class="content wide">
			
			<h:form id="usersForm" class="usersForm" prependId="false" enctype="multipart/form-data">
			
				<div class="clear"></div>
			
				<p:dataTable id="usersDataTable" 
					var="user"
					rowIndexVar="rowIndex"
					value="#{courseMembersBean.members}" 
					widgetVar="usersTable"
					emptyMessage="No users match given filter criteria"
					filteredValue="#{courseMembersBean.filteredMembers}"
					filterEvent="enter"
					paginator="true"
					rows="5"
                    paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                    rowsPerPageTemplate="5,10,15"
                    paginatorPosition="bottom">
	
					<f:facet name="header">Members</f:facet>
					
					<p:column headerText="#" styleClass="center middleAlign">
				        #{rowIndex+1}.
				    </p:column>
				    
					<p:column id="nameColumn" styleClass="middleAlign" headerText="Name" filterBy="name"
						filterMatchMode="contains" sortBy="name">
						<h:link value="#{user.name}" outcome="/manage/studentProfile">
							<f:param name="id" value="#{util:encodeId(user.id)}" />
						</h:link>
					</p:column>
	
					<p:column id="lastNameColumn" styleClass="middleAlign" headerText="Last Name" 
						filterBy="lastName"	filterMatchMode="contains" sortBy="lastName">
						<h:link value="#{user.lastName}" outcome="/manage/studentProfile">
							<f:param name="id" value="#{util:encodeId(user.id)}" />
						</h:link>
					</p:column>
	
					<p:column styleClass="center middleAlign" headerText="Photo">
						<h:link outcome="/manage/studentProfile" >
							<h:graphicImage id="userImageId" styleClass="imageRound image30"
								value="#{user.avatarUrl}" width="30"
								height="30" alt="" />
						    <f:param name="id" value="#{util:encodeId(user.id)}" />
						</h:link>
					</p:column>
				</p:dataTable>
			</h:form>
		</div>
	</div>
	

</ui:define>

</ui:composition>