<ui:component
		xmlns:h="http://java.sun.com/jsf/html"
		xmlns:ui="http://java.sun.com/jsf/facelets"
		xmlns:composite="http://java.sun.com/jsf/composite"
		xmlns:c="http://java.sun.com/jsp/jstl/core"
		xmlns:utilcomp="http://java.sun.com/jsf/composite/components/util"
		xmlns:courses="http://java.sun.com/jsf/composite/components/courses"
		xmlns:post="http://java.sun.com/jsf/composite/components/post">

	<composite:interface>
		<composite:attribute name="bean" required="true"/>
		<composite:attribute name="role" type="java.lang.String" default="USER"/>
		<composite:attribute name="learningContext" default=""/>
		<composite:attribute name="readOnly" required="true" />
		<composite:attribute name="growlToUpdate" default="" />
		<composite:attribute name="startedLearning" default="false" />
	</composite:interface>
	
	<composite:implementation>
		<div class="container">
			<div class="row">
				<div class="col-md-8">
					<h2>About #{msg['label.competence']}</h2>
					<p><h:outputText escape="false" value="#{cc.attrs.bean.competenceData.description}"/></p>
					<div class="whiteBox activitiesList">
						<courses:activityList
									activities="#{cc.attrs.bean.competenceData.activities}"
									encodedCredentialId="#{param['credId']}"
									encodedCompetenceId="#{param['compId']}"
									bean="#{cc.attrs.bean}"
									isEdit="false"
									showMarkedIfCompleted="true"
									readOnly="#{cc.attrs.readOnly}"
						/>
				   </div>
				   <c:if test="#{cc.attrs.role ne 'ADMIN'}">
					   <post:comments
							id="comments"
							comments="#{cc.attrs.bean.commentsData}"
							commentsContainerDivId="commentsContainerDiv"
							growlToUpdate="#{cc.attrs.growlToUpdate}"
							learningContext="#{cc.attrs.learningContext}"
							readOnly="#{cc.attrs.readOnly}"
							rendered="#{cc.attrs.startedLearning or cc.attrs.role eq 'MANAGER'}"
					   />
				   </c:if>
				</div>
				<div class="col-md-4">
					<ui:fragment rendered="#{not empty cc.attrs.bean.competenceData.tags}">
						<div class="sidebarBlock">
							<h2>Keywords</h2>
							<ul class="tags">
								<ui:repeat var="tag" value="#{cc.attrs.bean.competenceData.tags}">
									<li>#{tag.title}</li>
								</ui:repeat>
							</ul>
						</div>
					</ui:fragment>

					<div class="sidebarBlock">
						<h2>Created by</h2>
						<div class="user32">
							<a href="#">
								<utilcomp:userAvatar
									avatar="#{cc.attrs.bean.competenceData.creator.avatar}"
									fullName="#{cc.attrs.bean.competenceData.creator.name}" />
							</a>
							<h3><a href="#">#{cc.attrs.bean.competenceData.creator.name}</a></h3>
						</div>
					</div>
				</div>
			</div>

		</div>

		<c:if test="#{cc.attrs.role ne 'ADMIN' and not empty param['comment']}">
			<script>
				scrollTo('comment_' + #{util:decodeId(param['comment'])});
			</script>
		</c:if>
	</composite:implementation>
</ui:component>