<ui:composition	
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:utilcomp="http://java.sun.com/jsf/composite/components/util">
	
	<utilcomp:messagesBundle var="msg" />
	
	<div id="socialNetwork" class="socialNetwork">
		<h2>Settings: Social Networks</h2>
		<div class="separator clear"></div>

		<h:form id="socialNetworksSettingsForm">
			<p:growl id="socialNetworksFormGrowl" showDetail="true" />
			
			<h:panelGroup layout="block" id="socialNetworksContainer" class="socialNetworksContainer">
				<h3>Connect Your Twitter Account</h3>
				
				<p class="marginTop10">You can connect your Twitter account with ProSolo and all your Twitter posts will be 
					propagated to your followers in ProSolo. Your tweets will be displayed as ProSolo posts
					with an indication they are coming from Twitter. In order to enable this, you need to 
					connect your Twitter profile with ProSolo. Note that you will not have to give your Twitter 
					credentials and all communication with Twitter is performed via Twitter's secure 
					<a class="bold" href="https://dev.twitter.com/docs/auth/oauth/faq" target="_blank">oAuth protocol</a>.</p>
				
				<h:panelGroup id="twitter">
					<div class="row info">
						<div class="first bold">Action:</div>
		
						<div class="second">
							<p:commandLink rendered="#{!twitterBean.OK}"
								value="Connect" 
								styleClass="button size20 green"
								action="#{twitterBean.startTweeterOauthAuthProcess}"
								update=":socialNetworksSettingsForm:twitter editTwitterProfileLink socialNetworksFormGrowl" />
		
							<p:commandLink rendered="#{twitterBean.OK}"
								value="Disconnect" 
								styleClass="button size20 green"
								action="#{twitterBean.disconnectUserAccount}"
								update=":socialNetworksSettingsForm:twitter editTwitterProfileLink socialNetworksFormGrowl" />
						</div>
					</div>
					
					<div class="row info">
						<div class="first bold">Status:</div>
						<h:panelGroup>
							<div class="second">
								<h:outputText rendered="#{twitterBean.allOk and !twitterBean.disconnected}"
									value="#{msg['settings.socialNetworks.twitterConnection.connected']}" />
								<h:outputText rendered="#{!twitterBean.allOk and !twitterBean.disconnected}"
									value="#{msg['settings.socialNetworks.twitterConnection.notConnected']}" />
								<h:outputText rendered="#{twitterBean.disconnected}"
									value="#{msg['settings.socialNetworks.twitterConnection.disconnected']}" />
								&#160;
								<h:outputLink rendered="#{twitterBean.screenName!=null}" 
									value="#{twitterBean.twitterProfile}">@#{twitterBean.screenName}</h:outputLink>
							</div>
						</h:panelGroup>
					</div>
				</h:panelGroup>
			
				<div class="separator"></div>
				
				<h3>Social Network Account Links</h3>
				
				<p>Links to your Twitter, Facebook and Google Plus profiles will be displayed on your Profile page.</p>
			
			
				<div class="position row infoEdit">
					<div class="first bold">Twitter link:</div>
					<div class="second">
						<h:inputText id="editTwitterProfileLink"
							value="#{portfolio.socialNetworksData.twitterLinkEdit}"
							placeholder="#{msg['settings.socialNetworks.twitter']}" />
					</div>
				</div>
			
				<div class="position row infoEdit">
					<div class="first bold">Facebook link:</div>
					<div class="second">
						<h:inputText id="editFacebookProfileLink"
							value="#{portfolio.socialNetworksData.facebookLinkEdit}"
							placeholder="#{msg['settings.socialNetworks.facebook']}" />
					</div>
				</div>
			
				<div class="position row infoEdit">
					<div class="first bold">Google Plus link:</div>
					<div class="second">
						<h:inputText id="editGplusProfileLink"
							value="#{portfolio.socialNetworksData.gplusLinkEdit}"
							placeholder="#{msg['settings.socialNetworks.gplus']}" />
					</div>
				</div>
			<ui:remove>
				<div class="position row infoEdit">
					<div class="first bold">Blog link:</div>
					<div class="second">
						<h:inputText id="editBlogProfileLink"
							value="#{portfolio.socialNetworksData.blogLinkEdit}"
							placeholder="#{msg['settings.socialNetworks.blog']}" />
					</div>
				</div>
				</ui:remove>
				<div class="clear"></div>
				
				<h:panelGroup layout="block" class="actions">
					<p:commandLink styleClass="button size25 green left" value="Save"
						action="#{portfolio.updateSocialNetworks()}"
						update="socialNetworksContainer socialNetworksFormGrowl" />
				</h:panelGroup>
			</h:panelGroup>
		
			<utilcomp:lazyLoad 
				parentClass="socialNetwork"
				updateOnComplete=":socialNetworksSettingsForm:socialNetworksContainer"
				loaderContainer=".socialNetworksContainer"
				initializeAction="#{portfolio.initSocialNetworks()}"
			/>
		</h:form>
	</div>
</ui:composition>