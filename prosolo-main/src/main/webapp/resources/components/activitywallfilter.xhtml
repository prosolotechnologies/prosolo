<ui:composition
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:utilcomp="http://java.sun.com/jsf/composite/components/util">
	
	<utilcomp:messagesBundle var="msg" />
	
	<div class="filterContainer">
		<div class="clear separator filter">
			<ul class="aHolder">
				<li>
					<h:form id="mainActivityWallFilter">
						<a onclick="sendServiceUse('MOUSE_CLICK', {context: 'statusWall', link: 'filterOpen'})"
							class="filterDrop button gray size16">#{msg['activitywall.filter.'.concat(loggeduser.interfaceSettings.activityWallSettings.chosenFilter).toLowerCase()]}<span></span></a>
						
						<div class="dropdown hidden">
							<ul>
								<li class="filter #{loggeduser.interfaceSettings.activityWallSettings.chosenFilter == 'ALL_PROSOLO' ? 'selected' : ''} hasTooltip"
									title="#{msg['toolitip.activitywall.filter.all_prosolo']}" position="left">
									<p:commandLink 
										onclick="addLoader('form.mainActivityWallForm div.mainActivityWall', '#{cc.attrs.loadingMessage}');"
										update=":#{p:component('mainActivityWall')} :#{p:component('mainActivityWallFilter')}"
										action="#{activitywall.changeFilter()}"
										oncomplete="refreshActivityWall();">
										<f:param name="filter" value="ALL_PROSOLO" />
										#{msg['activitywall.filter.all_prosolo']}
									</p:commandLink>
								</li>
								<li class="filter #{loggeduser.interfaceSettings.activityWallSettings.chosenFilter == 'ALL' ? 'selected' : ''} hasTooltip"
									title="#{msg['toolitip.activitywall.filter.all']}" position="left">
									<p:commandLink 
										onclick="addLoader('form.mainActivityWallForm div.mainActivityWall', '#{cc.attrs.loadingMessage}');"
										update=":#{p:component('mainActivityWall')} :#{p:component('mainActivityWallFilter')}"
										action="#{activitywall.changeFilter()}"
										oncomplete="refreshActivityWall();">
										<f:param name="filter" value="ALL" />
										#{msg['activitywall.filter.all']}
									</p:commandLink>
								</li>
								<li class="filter #{loggeduser.interfaceSettings.activityWallSettings.chosenFilter == 'MY_NETWORK' ? 'selected' : ''} hasTooltip"
									title="#{msg['toolitip.activitywall.filter.my_network']}" position="left">
									<p:commandLink 
										onclick="addLoader('form.mainActivityWallForm div.mainActivityWall', '#{cc.attrs.loadingMessage}')"
										update=":#{p:component('mainActivityWall')} :#{p:component('mainActivityWallFilter')}"
										action="#{activitywall.changeFilter()}"
										oncomplete="refreshActivityWall();">
										<f:param name="filter" value="MY_NETWORK" />
										#{msg['activitywall.filter.my_network']}
									</p:commandLink>
								</li>
								<li class="filter #{loggeduser.interfaceSettings.activityWallSettings.chosenFilter == 'MY_ACTIVITIES' ? 'selected' : ''} hasTooltip"
									title="#{msg['toolitip.activitywall.filter.my_activities']}" position="left">
									<p:commandLink 
										onclick="addLoader('form.mainActivityWallForm div.mainActivityWall', '#{cc.attrs.loadingMessage}')"
										update=":#{p:component('mainActivityWall')} :#{p:component('mainActivityWallFilter')}"
										action="#{activitywall.changeFilter()}"
										oncomplete="refreshActivityWall();">
										<f:param name="filter" value="MY_ACTIVITIES" />
										#{msg['activitywall.filter.my_activities']}
									</p:commandLink>
								</li>
								<li class="filter #{loggeduser.interfaceSettings.activityWallSettings.chosenFilter == 'TWITTER' ? 'selected' : ''} hasTooltip"
									title="#{msg['toolitip.activitywall.filter.twitter']}" position="left">
									<p:commandLink 
										onclick="addLoader('form.mainActivityWallForm div.mainActivityWall', '#{cc.attrs.loadingMessage}')"
										update=":#{p:component('mainActivityWall')} :#{p:component('mainActivityWallFilter')}"
										action="#{activitywall.changeFilter()}"
										oncomplete="refreshActivityWall();">
										<f:param name="filter" value="TWITTER" />
										#{msg['activitywall.filter.twitter']}
									</p:commandLink>
								</li>
								<li class="filter #{loggeduser.interfaceSettings.activityWallSettings.chosenFilter == 'COURSE' ? 'selected' : ''} hasSubFilter filterDrop"
									title="#{msg['toolitip.activitywall.filter.course']}" position="left">
									
									<ul class="dropdown subFilter">
										<ui:repeat value="#{coursePortfolioBean.activeCourses}" var="courseData" varStatus="iterator">
											<li class="#{loggeduser.selectedStatusWallFilter.filterTypeClassName == 'CourseFilter' and loggeduser.selectedStatusWallFilter.courseId == courseData.id ? 'selected' : none}">
												<p:commandLink 
													onclick="addLoader('form.mainActivityWallForm div.mainActivityWall', '#{cc.attrs.loadingMessage}')"
													update=":#{p:component('mainActivityWall')} :#{p:component('mainActivityWallFilter')}"
													action="#{activitywall.changeFilter()}"
													oncomplete="refreshActivityWall();">
													<f:param name="filter" value="COURSE" />
													<f:param name="courseId" value="#{courseData.id}" />
													#{courseData.title}
												</p:commandLink>
											</li>
										</ui:repeat>
										
										<h:panelGroup rendered="#{empty coursePortfolioBean.activeCourses}" class="noContentMessage">
											#{msg['activitywall.filter.course.noCourses']}
										</h:panelGroup>
									</ul>
									#{msg['activitywall.filter.course']}
								</li>
							</ul>
							<utilcomp:tooltip target=".hasTooltip[title]" />
						</div>

						<script>
							enableDropdown('.filterContainer .filterDrop');
							$('.filterContainer .hasSubFilter').hover(function(){
								$(this).find('ul.subFilter').show();
							});
						</script>
					</h:form>
				</li>
			</ul>
		</div>
		<a class="refreshIcon right" onclick="$('form.mainActivityWallForm a.refreshAllHanler').trigger('click');sendServiceUse('MOUSE_CLICK', {context: 'statusWall', link: 'refresh'})"></a>
	</div>
</ui:composition>