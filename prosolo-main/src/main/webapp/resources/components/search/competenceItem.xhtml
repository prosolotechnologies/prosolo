<ui:component
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:composite="http://java.sun.com/jsf/composite"
	xmlns:p="http://primefaces.org/ui"
	xmlns:dlg="http://java.sun.com/jsf/composite/components/dialogs"
	xmlns:link="http://java.sun.com/jsf/composite/components/resourceLinks">

	<composite:interface>
		<composite:attribute name="compData" />
		<composite:attribute name="showAddToGoalLink" default="true" />
	</composite:interface>
	
	<composite:implementation>
					
		<div class="box">
			<div class="avatar">
				<span class="competenceIcon30"></span>
			</div>
			
			<div class="textWrapper">
				<span class="title">
					<link:competence 
						resource="#{cc.attrs.compData.competence}"
						type="Competence"
						title="#{cc.attrs.compData.title}" 
						context="competenceItem"/>
				</span>
				<div class="clear"></div>
				<h:panelGroup layout="block"
					rendered="#{cc.attrs.compData.description != null}"
					class="message">"#{cc.attrs.compData.description}"</h:panelGroup>
				<div class="clear"></div>
				<h:panelGroup layout="block" 
					class="user">
					Creator:&#160;
					<link:user value="userDetailsImage" 
	    				user="#{cc.attrs.compData.creator}"
	    				mode="imageName"
	    				imageSize="22"
	    				idPrefix="compSearchCreator#{iterator.index}"
	    				context="competenceItem.imageName" />
				</h:panelGroup>
				
				<div class="clear"></div>
				
				<h:panelGroup layout="block" rendered="#{cc.attrs.showAddToGoalLink}" class="links">
					<p:commandLink value="Add to Learning"
						styleClass="button green size20 left" 
						onclick="$('#addToGoalDialog').dialog('open');"
						actionListener="#{addToGoalDialog.initialize(cc.attrs.compData.competence, '')}"
						update=":addToGoal:addToGoalForm"
					/>
				</h:panelGroup>
			</div>
			
			<div class="date">Validity: #{cc.attrs.compData.validity} months</div>
		</div>
	</composite:implementation>
</ui:component>