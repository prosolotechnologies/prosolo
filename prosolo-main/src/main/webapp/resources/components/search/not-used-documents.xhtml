<ui:composition
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:comp="http://java.sun.com/jsf/composite/components"
	xmlns:dlg="http://java.sun.com/jsf/composite/components/dialogs"
	xmlns:link="http://java.sun.com/jsf/composite/components/resourceLinks"
	xmlns:socialWall="http://java.sun.com/jsf/composite/components/socialWall">
	
	<script>
		document.title = 'Search: Documents / Links';
	</script>
	
	<div id="searchDocumentsLinks">
		<h2>Documents / Links</h2>
		
		<div class="clear"></div>
		
		<h3 class="resource">
			<h:panelGroup rendered="true">
				For competence <a href="#">Construct Bivariate Correlations</a>
				<span class="remove"></span>
			</h:panelGroup>
		</h3>
		
		<h:form>
			<h:panelGroup layout="block" id="act" class="act">
				<div class="actBlock">
					<p class="title">
						Biserial and Point-Biserial Correlations
					</p>
					
					<socialWall:attachmentPreview 
						attachmentPreview="#{actIterator.attachmentPreview}" />
					
					<ui:remove>
					<h:panelGroup layout="block" class="richContent" rendered="true">
						<div class="imgInfoContainer">
							<h:panelGroup layout="block" id="imageContainer">
								<div class="atcImages"> 
									<h:outputLink target="_blank" value="http://linkhref.com">
										<h:graphicImage value="http://www.apexdissertations.com/articles/pearson.jpg" styleClass="#{actIterator.attachmentPreview.contentType == 'UPLOAD' ? 'imgInfoContainer50' : 'imgInfoContainer100'}" />
									</h:outputLink>
								</div>
							</h:panelGroup>
						</div>
						
						<h:panelGroup layout="block" id="atcInfo" styleClass="actInfo #{actIterator.attachmentPreview.image != null ? 'actInfoSmallImgBig' : 'actInfoBig'}">
							<h:outputLink styleClass="atcTitle" target="_blank" value="#{actIterator.attachmentPreview.link}">
								<h:outputText value="A basic explanation of point-biserial correlation." />
							</h:outputLink>
							<label class="atcUrl">
								<h:outputText rendered="#{actIterator.attachmentPreview.contentType == 'UPLOAD'}" value="http://#{request.serverName}:#{request.serverPort}#{request.contextPath}/#{actIterator.attachmentPreview.link}" />
								<h:outputText rendered="#{actIterator.attachmentPreview.contentType != 'UPLOAD'}" value="http://www.apexdissertations.com/articles/point-biserial_correlation.html" />
							</label>
							
							<br clear="all" /> 
							<label class="atcDesc"><h:outputText value="Describes what what point-biserial correlation is, comparing it to the Pearson product-momemnt correlation and shows how to interpret results" /></label> 
						</h:panelGroup>
					</h:panelGroup>
					</ui:remove>
					
					<p class="links">
						<p:commandLink
							rendered="#{!actIterator.liked}"
							actionListener="#{likeaction.like(actIterator.object, 'search.document')}" 
							oncomplete="refreshCompetenceActivityWall();" >
							Like
						</p:commandLink>
						<p:commandLink
							rendered="#{actIterator.liked}"
							actionListener="#{likeaction.removeLike}" 
							oncomplete="refreshCompetenceActivityWall();" >
							<f:param name="resId" value="#{actIterator.object.id}" />
							Unike
						</p:commandLink>
						<span></span>
						<p:commandLink actionListener="#{postaction.resharePost}"
							oncomplete="refreshCompetenceActivityWall();">
							<f:param name="actId" value="#{actIterator.object.id}" />
							Share
						</p:commandLink>
						<ui:remove>
							<span></span>
							<a href="#">Bookmark</a> 
						</ui:remove>
					</p>
					
					<h:panelGroup layout="block" class="commentsBox">
						<div class="arrow"></div>
						<div class="comments">
							<p class="likes">
								<h:panelGroup layout="block" rendered="#{actIterator.likeCount > 0}">
									Liked by
									<p:commandLink
										value="#{actIterator.likeCount} people"
										actionListener="#{peopleListDialog.initializePeopleWhoLiked(actIterator.object)}"
										onclick="$('#peopleListDialog').dialog('open');"
										update=":peopleListForm"
									/>
								</h:panelGroup>
								<h:panelGroup layout="block" rendered="#{actIterator.likeCount > 0 and actIterator.shareCount > 0}">
									<span></span>
								</h:panelGroup>
								<h:panelGroup layout="block" rendered="#{actIterator.shareCount > 0}">
									Shared by <h:commandLink value="#{actIterator.shareCount}"> people</h:commandLink><span></span>
								</h:panelGroup>
							<ui:remove>
								<h:panelGroup layout="block" rendered="#{actIterator.bookmarkCount > 0 and actIterator.shareCount > 0}">
									<span></span>
								</h:panelGroup>
								<h:panelGroup layout="block" rendered="#{actIterator.bookmarkCount > 0}">
									Bookmarked by <h:commandLink value="#{actIterator.bookmarkCount}"> people</h:commandLink><span></span>
								</h:panelGroup>
							</ui:remove>
							</p>
							<ui:repeat value="#{actIterator.comments}" var="commentIterator" varStatus="commentIteratorStatus">
								<div class="comment">
									<link:user value="activityComment" 
										divClass="avatar"
					    				user="#{commentIterator.maker}"
					    				mode="image"
					    				imageSize="30"
					    				idPrefix="#{actIteratorStatus.index}Comment#{commentIteratorStatus.index}Avatar" 
					    				context="documents.image"
					    			/>
									<p class="commentContent">
										<span class="time">
											<p:commandLink
												value="Like"
												rendered="#{!commentIterator.liked}"
												action="#{likeaction.like(commentIterator.comment, 'search.document')}"
												oncomplete="refreshCompetenceActivityWall();"
											/>
											<p:commandLink
												value="Unike"
												rendered="#{commentIterator.liked}"
												actionListener="#{likeaction.removeLike(commentIterator.comment)}"
												oncomplete="refreshCompetenceActivityWall();"
											/>
											<span class="bullet"></span>
											<h:panelGroup rendered="#{commentIterator.likeCount > 0}">
												Liked by 
												<p:commandLink
													value="#{commentIterator.likeCount} people"
													action="#{peopleListDialog.initializePeopleWhoLiked(commentIterator.comment)}"
													onclick="$('#peopleListDialog').dialog('open');"
													update=":peopleListForm"
												/>
												<span class="bullet"></span>
											</h:panelGroup>
											
											<h:outputText value="#{commentIterator.when}" />
										</span> 
										
										<link:user value="userDetailsComment" 
						    				user="#{commentIterator.maker}"
						    				divClass="name"
						    				mode="name"
						    				idPrefix="#{actIteratorStatus.index}comment#{commentIteratorStatus.index}"
						    				context="documents.name" />
						    				
										<br />
										<h:outputText value="#{commentIterator.text}" />
									</p>
									<div class="clear"></div>
								</div>
							</ui:repeat>
							<div class="addComment">
								<comp:newcomment value="statusUpdate" id="statusUpdate" 
									content="#{actIterator.newComment}" 
									commentAction="#{commentaction.newComment(actIterator)}"
									refreshCommand="form.#{cc.attrs.value}Form a.refreshAllHanler"
									stopWallUpdateCommand="activityPoll.start();"
									watermark="Add a comment" />
							</div>
						</div>
					</h:panelGroup>
				</div>
				<div class="clear"></div>
			</h:panelGroup>
			
			<script type="text/javascript">
			$(function() {
				$('.box .name.resource').shortenedText({showChar: 40, mode: 'static'});
				$('.box .message').shortenedText({showChar: 160, mode: 'static'});
			});
			</script>
		</h:form>
	</div>
</ui:composition>