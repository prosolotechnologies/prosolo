<ui:component xmlns="http://www.w3.org/1999/xhtml"
              xmlns:h="http://java.sun.com/jsf/html"
              xmlns:f="http://java.sun.com/jsf/core"
              xmlns:ui="http://java.sun.com/jsf/facelets"
              xmlns:p="http://primefaces.org/ui"
              xmlns:composite="http://java.sun.com/jsf/composite"
              template="templates/masterLayout2.xhtml"
              xmlns:pt="http://xmlns.jcp.org/jsf/passthrough">

    <composite:interface>
        <composite:attribute name="editPasswordMethodName" required="true" />
        <composite:attribute name="passwordValue" required="true" />
        <composite:attribute name="editPasswordAction" required="true" method-signature="void #{cc.attrs.editPasswordMethodName}()"/>
    </composite:interface>

    <ui:define name="metadata">
        <f:metadata>
            <f:viewParam name="id" value="#{userEditBean.id}" />
            <f:viewAction action="#{userEditBean.initPassword()}" />
        </f:metadata>
    </ui:define>

    <composite:implementation>
        <div class="whiteBar"></div>

        <div class="container" id="editUserPassword">
            <div class="row">
                <div class="container">
                    <ol class="breadcrumb">
                        <li>
                            <h:link value="Admins" outcome="/admin/adminAdmins"/>
                        </li>
                        <li class="active">
                            #{adminEditBean.admin.fullName}
                        </li>
                    </ol>
                </div>
                <div class="col-md-12">
                    <div class="whiteBox settingsChangePassword">
                        <h2>Change Password</h2>
                        <h:form id="formMain">
                            <p:growl id="growlMain" showDetail="true" globalOnly="true"></p:growl>
                            <div class="formWrapper">
                                <div class="formLine">
                                    <label>New password</label>
                                    <div class="formLineRight">
                                        <p:password id="inputPassword"
                                                    autofocus="true"
                                                    value="#{cc.attrs.passwordValue}"
                                                    required="true"
                                                    requiredMessage="The password cannot be empty">
                                        </p:password>
                                        <h:panelGroup layout="block"
                                                      rendered="#{not empty facesContext.getMessageList('formMain:inputPassword')}"
                                                      styleClass="alert alert-danger" pt:role="alert">
                                            <h:message for="inputPassword"></h:message>
                                        </h:panelGroup>
                                    </div>
                                </div>
                                <div class="formLine">
                                    <label>&#160;</label>
                                    <div class="formLineRight">
                                        <p:commandLink id="updatePasswordBtn"
                                                styleClass="btn btn-green"
                                                action="#{cc.attrs.editPasswordAction}"
                                                update=":editUserPassword:formMain">
                                            Save
                                        </p:commandLink>
                                        <p:defaultCommand target="updatePasswordBtn" />
                                    </div>
                                </div>
                            </div>
                        </h:form>
                    </div>
                </div>
            </div>
        </div>
    </composite:implementation>
</ui:component>
