<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:composite="http://java.sun.com/jsf/composite">
<h:head>
</h:head>

<composite:interface>
	<composite:attribute name="title" type="java.lang.String" required="true"/>
	<composite:attribute name="inputDesc" required="true"/>
	<composite:attribute name="validationMethodName" required="true"/>
	<composite:attribute name="validateName" required="true" method-signature="void #{cc.attrs.validationMethodName}(
		javax.faces.context.FacesContext, 
		javax.faces.component.UIComponent, 
		java.lang.Object)"/>
	<composite:attribute name="context" required="true"/>
	<composite:attribute name="update" required="true" />
	<composite:attribute name="action"  />
</composite:interface>

<composite:implementation xmlns:utilcomp="http://java.sun.com/jsf/composite/components/util">

	<div id="edit#{cc.attrs.context}Dialog" class="admin roleDetails newRole" title="#{cc.attrs.title}">
						
		<h:form id="edit#{cc.attrs.context}Form" prependId="false">
			<p:growl id="edit#{cc.attrs.context}FormGrowl" showDetail="true" />
			
			<table>
				<tr>
					<td class="col1">
						<h:outputLabel for="desc">Name:</h:outputLabel>
					</td>
					<td>
						<h:inputText id="desc" 
							value="#{cc.attrs.inputDesc}" 
							required="true" 
							requiredMessage="Name is required"
							validator="#{cc.attrs.validateName}" />
					</td>
				</tr>
				<tr>
					<td></td>
					<td>
						<h:message for="desc" style="color: red"></h:message>
					</td>
					<td></td>
				</tr>
			</table>
			
			<div class="actions">
				<p:commandLink id="save" value="Save" 
					styleClass="button green size30 right"
					oncomplete="
						if (args &amp;&amp; !args.validationFailed)
							$('#edit#{cc.attrs.context}Dialog').dialog('close');"
				 	action="#{cc.attrs.action}" 
				 	update="edit#{cc.attrs.context}Form #{cc.attrs.update}" />

				<a href="#" class="button gray size30 right"
					onclick="$('#edit#{cc.attrs.context}Dialog').dialog('close');">Cancel</a>
			</div>
		</h:form>
	</div>
	
	<script>
	$(function() {
		$('#edit#{cc.attrs.context}Dialog').dialog({
			autoOpen : false,
			show : 'slide',
			width : 550,
			modal : true,
			resizable : false,
			open : function(event, ui) {
				$(this).children(':first')
					.css('text-align', 'center')
					.css('padding-top', '100px')
					.html('<img src="#{request.contextPath}/resources/images/style/ajax-loader-black.gif" style="vertical-align:middle;"/>');
			}
		});
		$('#edit#{cc.attrs.context}Dialog').show();
	});
	</script>
</composite:implementation>
</html>