<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:composite="http://java.sun.com/jsf/composite"
	xmlns:pt="http://xmlns.jcp.org/jsf/passthrough">
<h:head>
</h:head>

<composite:interface>
</composite:interface>

<composite:implementation xmlns:utilcomp="http://java.sun.com/jsf/composite/components/util">
	<utilcomp:messagesBundle var="msg" />
	
	<h:outputScript library="javascript" name="jquery.autosize.min.js" target="head" />

	<div id="editRoleModalDialog" class="admin roleDetails roleDialog" title="#{msg['admin.roles.dialog.edit.title']}" style="display: none;">
						
		<h:form id="editRoleForm" prependId="false">
			<p:growl id="editRoleFormGrowl" showDetail="true" /> 
			
			<table class="table">
				<tr>
					<td class="col1">
						<h:outputLabel for="editName">Title:</h:outputLabel>
					</td>
					<td>
						<div class="form-group">
							<h:inputText id="editName" 
								pt:placeholder="Role title"
						    	styleClass="form-control title"
								value="#{roles.formData.name}" 
								required="true"
								validator="#{roles.validateName}"
								requiredMessage="Name is required" />
						</div>
					</td>
				</tr>
				<tr>
					<td class="col1 colDescription">
						<h:outputLabel for="editDescription">Description:</h:outputLabel>
					</td>
					<td>
						<h:inputTextarea id="editDescription"
							value="#{roles.formData.description}"
							styleClass="form-control description"
							placeholder="#{msg['textarea.description']}" />
					
						<script>
						$(function() {
							$('.admin.roleDetails.editRole textarea').autosize();
						});
						</script>
					</td>
				</tr>
			</table>
			
			<div class="bold">Capabilities:</div>
			
			<h:selectManyCheckbox
				value="#{roles.selectedCapabilities}" layout="pageDirection">
				<f:selectItems value="#{roles.allCapabilities}" />
			</h:selectManyCheckbox>
			
			<div class="actions">
				<p:commandLink id="saveedit" value="Save"
					pt:role="button"
					styleClass="btn btn-primary"
					onclick='$("#editRoleModalDialog").dialog("close");'
				 	actionListener="#{roles.updateRole}" 
				 	update="@form :rolesForm" />
				
				<a href="#"
					role="button"
					class="btn btn-default"
					onclick='$("#editRoleModalDialog").dialog("close");'>Cancel</a>
			</div>
		</h:form>
	</div>
	
	<script>
	$(function() {
		$('#editRoleModalDialog').dialog({
			autoOpen : false,
			show : 'slide',
			width : 550,
			modal : true,
			resizable : false,
			open : function(event, ui) {
				$(this).children(':first')
					.css('text-align', 'center')
					.css('padding-top', '100px')
					.html('<img src="#{request.contextPath}/resources/images/style/ajax-loader-black.gif" style="vertical-align:middle;"/>');
			}
		});
		$('#newRoleModalDialog').show();
	});
	</script>
</composite:implementation>
</html>