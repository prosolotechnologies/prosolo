<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:composite="http://java.sun.com/jsf/composite">
<h:head>
</h:head>

<composite:interface>
	<composite:attribute name="regionToUpdate" type="java.lang.String" />
</composite:interface>

<composite:implementation xmlns:utilcomp="http://java.sun.com/jsf/composite/components/util">
	
	<utilcomp:messagesBundle var="msg" />

	<div id="newUnitModalDialog" title="Create new Unit">

		<h:form id="newUnitForm" prependId="false">
			<p:growl id="newUnitFormGrowl" showDetail="true" />
			<h:panelGrid columns="2">

				<h:outputLabel for="parentName">Parent Unit:</h:outputLabel>
				<h:outputText id="parentName" value="#{units.formData.parentName}" />


				<h:outputLabel for="name">Name:</h:outputLabel>
				<h:inputText id="name" value="#{units.formData.name}"
					required="true" requiredMessage="Name field is required"
					validator="#{units.validateName}" />


				<h:outputLabel for="description">Description:</h:outputLabel>
				<h:inputTextarea id="description" rows="4" cols="55"
					value="#{units.formData.description}"
					placeholder="#{msg['textarea.description']}" />

				<p:commandButton id="save" value="Save"
					onclick='$("#newUnitModalDialog").dialog("close");'
					actionListener="#{units.saveNewSubUnit}"
					update="#{cc.attrs.regionToUpdate}" />

				<p:commandButton id="cancel" value="Cancel"
					onclick='$("#newUnitModalDialog").dialog("close");'
					immediate="true" />

			</h:panelGrid>
		</h:form>
	</div>

	<script>
		$(function() {
			$("#newUnitModalDialog").dialog({
				autoOpen : false,
				height : 210,
				width : 500,
				modal : true,
			});
		});
	</script>
</composite:implementation>
</html>