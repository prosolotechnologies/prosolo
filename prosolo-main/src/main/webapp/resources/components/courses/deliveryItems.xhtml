<ui:component
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:composite="http://java.sun.com/jsf/composite"
	xmlns:p="http://primefaces.org/ui"
	xmlns:comp="http://java.sun.com/jsf/composite/components"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:utilcomp="http://java.sun.com/jsf/composite/components/util"
	xmlns:util="http://www.prosolo.com/util">

	<composite:interface>
		<composite:attribute name="deliveries" required="true" />
		<composite:attribute name="showNumberOfStudentsAndInstructors" default="false" />
		<composite:attribute name="canEdit" default="false" />
	</composite:interface>
	
	<composite:implementation>
		<ul>
			<ui:repeat var="delivery" value="#{cc.attrs.deliveries}">
	            <li class="deliveryItem">
	                <div class="deliveryItemLeft">
	                    <div class="status #{styleUtilBean.getStyleClassBasedOnDeliveryStatus(delivery.deliveryStatus)}"></div>
	                    <h3><span>Delivery title:</span> #{delivery.title}</h3>
	                    <div class="deliveryMeta">
	                        <div class="deliveryTime">
	                            <div class="start"><span>Start:</span>
									<utilcomp:convertTimeOutput
											millis="#{delivery.deliveryStartTime}"
											format="MMM DD, YYYY [at] hh:mm a"
									/>
								</div>
	                            <div class="end"><span>End:</span>
									<utilcomp:convertTimeOutput
											millis="#{delivery.deliveryEndTime}"
											format="MMM DD, YYYY [at] hh:mm a"
									/>
								</div>
	                        </div>
	                        <c:if test="#{cc.attrs.showNumberOfStudentsAndInstructors}">
		                        <div class="deliveryPeople">
		                            <div class="students">
		                            	<span>Students:</span> 
		                            	<ui:fragment rendered="#{delivery.numberOfStudents gt 0}">
		                            		<a href="javascript:void(0);">#{delivery.numberOfStudents}</a>
		                            	</ui:fragment>
		                            	<ui:fragment rendered="#{delivery.numberOfStudents le 0}">
		                            		-
		                            	</ui:fragment>		
		                            </div>
		                            <div class="instructors"><span>Instructors:</span> 
		                            	<ui:fragment rendered="#{delivery.numberOfInstructors gt 0}">
		                            		<a href="javascript:void(0);">#{delivery.numberOfInstructors}</a>
		                            	</ui:fragment>
		                            	<ui:fragment rendered="#{delivery.numberOfInstructors le 0}">
		                            		-
		                            	</ui:fragment>	
		                            </div>
		                        </div>
		                    </c:if>
	                    </div>
	                </div>
	                <div class="deliveryItemRight">
	                    <h:link rendered="#{cc.attrs.canEdit}" 
	                    	outcome="/manage/create-credential" 
	                    	styleClass="btn btn-green-stroke btn-sm">
	                    	Edit
	                    	<f:param name="id" value="#{util:encodeId(delivery.id)}"></f:param>
	                    </h:link>
	                    <h:link outcome="/manage/credential">
	                    	Preview
	                    	<f:param name="id" value="#{util:encodeId(delivery.id)}"></f:param>
	                    </h:link>
	                </div>
	            </li>
	         </ui:repeat>
        </ul>
	</composite:implementation>
</ui:component>