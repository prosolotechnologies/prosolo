<ui:component
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:composite="http://java.sun.com/jsf/composite"
	xmlns:p="http://primefaces.org/ui"
	xmlns:comp="http://java.sun.com/jsf/composite/components"
	xmlns:utilcomp="http://java.sun.com/jsf/composite/components/util"
	xmlns:action="http://java.sun.com/jsf/composite/components/actions">
	
	<!-- 
		addToGoalDialogId: 		id of a addTOGoal dialog. Different addTOGoal dialogs can update different components after submit 
		addToGoalDialogUpdate:	form of addToGoalDialog
	
	-->

	<composite:interface>
		<composite:attribute name="competenceId" type="java.lang.Long"/>
		<composite:attribute name="styleClass" type="java.lang.String"/>
		<composite:attribute name="toUpdateAfterAddToGoal" type="java.lang.String" />
		<composite:attribute name="toRender" default="true"/>
	</composite:interface>
	
	<composite:implementation>
		
		<h:panelGroup rendered="#{competenceStatusCache.isCompleted(cc.attrs.competenceId) and cc.attrs.toRender}" >
			<span class="hasTooltip iconCheck #{cc.attrs.styleClass}" title="You already have this competence"></span>
		</h:panelGroup>
		<h:panelGroup rendered="#{competenceStatusCache.isInProgress(cc.attrs.competenceId) and cc.attrs.toRender}" >
			<span class="hasTooltip iconInProgress #{cc.attrs.styleClass}" title="Part of an ongoing learning goal"></span>
		</h:panelGroup>
		
		<h:panelGroup rendered="#{competenceStatusCache.doNotHave(cc.attrs.competenceId) and cc.attrs.toRender}" >
			<span class="hasTooltip #{cc.attrs.styleClass}" title="You do not have this competence. Add it to your goal.">
				
				<action:addToGoal 
					resetStyle="true"
					styleClass="iconAdd" 
					competenceId="#{cc.attrs.competenceId}"
					toUpdateAfterAddToGoal="#{cc.attrs.update}" />
			</span>
		</h:panelGroup>
		
	</composite:implementation>
</ui:component>