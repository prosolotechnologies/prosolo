<ui:composition
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:utilcomp="http://java.sun.com/jsf/composite/components/util">
	
	<div class="recomendedDocs">
		<h3>Suggested Documents / Links <utilcomp:infotooltip position="SUGGESTED_DOCUMENTS_LINKS" /></h3>
		
		<h:form id="docRecommendation" prependId="false" style="font-size: 10px;">
		
			<p:growl id="docRecommendGrowl" showDetail="true" />

			<h:panelGroup layout="block" class="docRecommendationPanel" style="display: none;" id="docRecommendationPanel">
				<h:panelGroup rendered="#{empty goalRecommendedDocuments.documents}" class="noContentMessage">
					No recommendations.
				</h:panelGroup>
					
				<ul class="bullets">
					<ui:repeat value="#{goalRecommendedDocuments.documents}" var="recDoc">
						<li>
							<h:panelGroup id="webPageLink" rendered="#{recDoc.webPage}">
								<h:outputLink styleClass="atcUrl webPageLink"
									onclick="sendLogPageNavigation('#{recDoc.path}','learn.targetGoal.#{learninggoals.selectedGoalData.data.targetGoalId}.suggestedDocuments');" 
									target="_blank" 
									value="#{recDoc.path}">
									#{recDoc.title}
								</h:outputLink>
							</h:panelGroup>
							
							<h:panelGroup id="documentLink" rendered="#{!recDoc.webPage}">
								<h:outputLink styleClass="atcUrl documentLink"
									onclick="sendLogPageNavigation('#{recDoc.path}','learn.targetGoal.#{learninggoals.selectedGoalData.data.targetGoalId}.suggestedDocuments');" 
									target="_blank" 
									value="#{recDoc.path}">
									#{recDoc.title}
								</h:outputLink>
							</h:panelGroup>	 
						</li>
					</ui:repeat>
				</ul>

				<h:panelGroup layout="block" id="seeAlldocumentsLinksPanelId" rendered="#{goalRecommendedDocuments.hasMoreGoalRecommendedDocuments}">
					<a href="#" class="font11 center">See all</a>
				</h:panelGroup>
			</h:panelGroup>
			
			<utilcomp:tooltip target=".hasTooltip[title]" />
			
			<utilcomp:lazyLoad 
				parentClass="recomendedDocs"
				updateOnComplete=":docRecommendation:docRecommendationPanel"
				loaderContainer=".docRecommendationPanel"
				initializeAction="#{learninggoals.initRecommendedDocuments()}"
				loaderClass="left"
			/>
			<script>
				$('.sideBox .atcUrl').shortenedText({showChar: 42, mode: 'static'});
			</script>
		</h:form>
		
		<div class="clear"></div>
	</div>
	
	<script>
	$(function() {
		$('.sideBox .atcUrl').shortenedText({showChar: 42, mode: 'static'});
	});
	</script>
</ui:composition>