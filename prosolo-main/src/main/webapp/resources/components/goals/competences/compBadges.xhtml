<ui:composition
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:goalscomps="http://java.sun.com/jsf/composite/components/goals"
	xmlns:comp="http://java.sun.com/jsf/composite/components"
	xmlns:utilcomp="http://java.sun.com/jsf/composite/components/util">
	
	<div class="competenceBadges">
		<h3>Badges</h3>
		
		<h:panelGroup id="selectedCompetenceBadges">
			<h:panelGroup id="compBadges" class="compBadges">
				<h:panelGroup class="noContentMessage" rendered="#{learninggoals.selectedGoalData.selectedCompetence.badgeCount == 0}">
					There are no badges
				</h:panelGroup>
			
				<h:panelGroup 
					rendered="#{learninggoals.selectedGoalData.selectedCompetence.badgeCount > 0}"
					class="badge badgeStar size20 middleAlign" />
				<h:panelGroup 
					rendered="#{learninggoals.selectedGoalData.selectedCompetence.badgeCount > 1}"
					class="badge badgeStar size20 middleAlign marginLeft10" />
				
				<h:panelGroup rendered="#{learninggoals.selectedGoalData.selectedCompetence.badgeCount > 0}">
					<p:commandLink
						styleClass="middleAlign marginLeft10"
						onclick="$('#badgeListDialog').dialog('open');"
						action="#{badgelist.initializeById(learninggoals.selectedGoalData.selectedCompetence.data.id, 'learn.targetGoal.'.concat(learninggoals.selectedGoalData.data.targetGoalId).concat('.targetComp.').concat(learninggoals.selectedGoalData.selectedCompetence.data.id))}"
						process="@this"
						update=":badgeListForm"
						value="See all badges"
					/>
				</h:panelGroup>
			</h:panelGroup>
			
			<utilcomp:lazyLoad 
				parentClass="competenceBadges"
				updateOnComplete=":activities:compBadges"
				loaderContainer=".compBadges"
				initializeAction="#{learninggoals.selectedGoalData.selectedCompetence.initializeBadges()}"
				loaderClass="left"
			/>
		</h:panelGroup>
		
		<div class="clear marginBottom10"></div>
	</div>
</ui:composition>