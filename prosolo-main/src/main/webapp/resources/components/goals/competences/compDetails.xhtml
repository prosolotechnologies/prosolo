<ui:composition
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:utilcomp="http://java.sun.com/jsf/composite/components/util"
	xmlns:comp="http://java.sun.com/jsf/composite/components"
	xmlns:link="http://java.sun.com/jsf/composite/components/resourceLinks"
	xmlns:icon="http://java.sun.com/jsf/composite/components/resourceLinks/icons"
	xmlns:dlg="http://java.sun.com/jsf/composite/components/dialogs">
	
	<div class="competenceDetails">
	 	<h:panelGroup layout="block" id="competenceDetails">
	 	
			<h:panelGroup id="selectedCompetenceDetailsForm">
				<p:commandLink
					rendered="#{!learninggoals.selectedGoalData.selectedCompetence.completed and 
						learninggoals.selectedGoalData.selectedCompetence.data.canNotBeMarkedAsCompleted == null}"
					styleClass="iconUnCheck left marginRight5"
					action="#{competencesBean.setCompletionOfSelectedCompetence(true, 'learn.targetGoal.'.concat(learninggoals.selectedGoalData.data.targetGoalId).concat('.targetComp.').concat(learninggoals.selectedGoalData.selectedCompetence.data.id).concat('.competenceDetails'))}"
					process="@this"
					update=":activities:competenceDetails :goalDetails :competenceList :newCompetenceButtonForm :compSearchForm"
				/>
				
				<h:panelGroup rendered="#{!learninggoals.selectedGoalData.selectedCompetence.completed and 
						learninggoals.selectedGoalData.selectedCompetence.data.canNotBeMarkedAsCompleted != null}">
					<span class="iconUnCheck left marginRight5 hasTooltip"
						title="#{tooltips.getActionDisabledText(learninggoals.selectedGoalData.selectedCompetence.data.canNotBeMarkedAsCompleted)}"></span>
				</h:panelGroup>
				
				<p:commandLink
					rendered="#{learninggoals.selectedGoalData.selectedCompetence.completed}"
					styleClass="iconCheck left marginRight5"
					action="#{competencesBean.setCompletionOfSelectedCompetence(false, 'learn.targetGoal.'.concat(learninggoals.selectedGoalData.data.targetGoalId).concat('.targetComp.').concat(learninggoals.selectedGoalData.selectedCompetence.data.id).concat('.competenceDetails'))}"
					process="@this"
					update=":activities:competenceDetails :goalDetails :competenceList :newCompetenceButtonForm :compSearchForm"
				/>
				
				<span class="middleAlign bold compTitle">#{learninggoals.selectedGoalData.selectedCompetence.data.title}</span>
					
				<link:competence 
					resourceId="#{learninggoals.selectedGoalData.selectedCompetence.data.id}"
					type="TargetCompetence"
					title="Details"
					styleClass="button blue size25 right activitiesBtn"
					context="learn.targetGoal.#{learninggoals.selectedGoalData.data.targetGoalId}.targetComp.#{learninggoals.selectedGoalData.selectedCompetence.data.id}.competenceDetails" />

				<div class="clear marginBottom10"></div>
				
				<utilcomp:tooltip target=".hasTooltip[title]" />
			</h:panelGroup>
		</h:panelGroup>
	</div>
</ui:composition>