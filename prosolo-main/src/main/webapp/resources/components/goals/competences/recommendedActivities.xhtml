<ui:composition 
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:goalcomp="http://java.sun.com/jsf/composite/components/goals"
	xmlns:utilcomp="http://java.sun.com/jsf/composite/components/util"
	xmlns:link="http://java.sun.com/jsf/composite/components/resourceLinks">
	
	<h:outputStylesheet library="css" name="jquery.bxslider.css"  />
	
	<h:outputScript library="javascript" name="jquery.bxslider.js" target="head" />
	<h:outputScript library="javascript" name="jquery.shortenedText.js" target="head"/>
	
	<h:panelGroup layout="block" id="recommendedActsForm">
		<h:panelGroup layout="block" id="recommendedActsFormContainer"
			class="recommendedActs"
			rendered="#{learninggoals.selectedGoalData.selectedCompetence.showRecommendedActivities
				and not empty learninggoals.selectedGoalData.selectedCompetence.recommendedActivities}">
			
			<ui:param name="contextRoot" value="learn.targetGoal.#{learninggoals.selectedGoalData.data.targetGoalId}.targetComp.#{learninggoals.selectedGoalData.selectedCompetence.data.id}.recommendedActivities" />
			
			<p:commandLink styleClass="closeIcon"
				onclick="$('.goalsPage .recommendedActs').fadeOut();"
				action="#{learninggoals.selectedGoalData.selectedCompetence.disableActivitiesRecommendation()}"
				provess="@this"
				update="recommendedActsForm" />
			<h3>
				Recommended Activities
				<utilcomp:infotooltip 
					position="RECOMMENDED_ACTIVITIES" 
					context="#{contextRoot}" />
			</h3>
		
			<div class="recommendedActContainer">
				<ui:repeat id="activitiesRepeat" 
					value="#{learninggoals.selectedGoalData.selectedCompetence.recommendedActivities}" 
					var="recommendation" 
					varStatus="recommendationStatus">
				
					<div class="activity" data-id="#{recommendation.activity.id}">
						<div class="richContent">
							<span class="activityIcon30 hasTooltip left marginRight10"></span>
							
							<div class="actInfo actInfoLogo">
								<span class="title">#{recommendation.activity.title}</span>
								
								<div class="clear"></div>
				
								<p class="atcDesc">
									Descriptive statistics is the discipline of quantitatively describing the main features of a collection of data. 
									Descriptive statistics are distinguished from inferential statistics (or inductive statistics), in 
									that descriptive statistics aim to summarize a sample, rather than use the data to learn about the 
									population that the sample of data is thought to represent.
								</p>
							</div>
							
							<div class="actions">
								<link:activity
									activityId="#{recommendation.activity.id}"
									styleClass="button green size20 left"
									title="Details"  
									context="#{contextRoot}.details" />
								
								<p:commandLink styleClass="button green size20 left" 
									value="Add Activity"
									action="#{compwall.connectActivityById(recommendation.activity.id, contextRoot.concat('.addButton'))}"
									process="@this"
									oncomplete="refreshCompetenceActivityWall();" />
							</div>
						</div>
					</div>
				</ui:repeat>
			</div>
			
			<div class="control">
				<span class="button gray size16 right next">Next</span>
				<span class="pager"></span>
				<span class="button gray size16 left prev">Prev</span>
			</div>
			<div class="clear"></div>
		
			<script>
			$(function(){
				$('.recommendedActContainer').bxSlider({
					slideWidth: 292,
					slideMargin: 0,
					maxSlides: 2,
					infiniteLoop: false,
					prevSelector: '.recommendedActs .control .prev',
					nextSelector: '.recommendedActs .control .next',
					pagerSelector: '.recommendedActs .pager'
				});
				
				$('.recommendedActs .activity .title').shortenedText({showChar: 30, mode: 'static'});
				$('.recommendedActs .activity .atcDesc').shortenedText({showChar: 80, mode: 'static'});
			});
			</script>
		</h:panelGroup>
	</h:panelGroup>
</ui:composition>