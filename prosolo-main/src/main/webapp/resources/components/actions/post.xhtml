<ui:component
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:composite="http://java.sun.com/jsf/composite"
	xmlns:p="http://primefaces.org/ui"
	xmlns:comp="http://java.sun.com/jsf/composite/components"
	xmlns:utilcomp="http://java.sun.com/jsf/composite/components/util">

	<composite:interface>
		<composite:attribute name="text" type="java.lang.String" />
		<composite:attribute name="link" type="java.lang.String" />
		<composite:attribute name="activity" type="org.prosolo.common.domainmodel.activities.Activity" />
		<composite:attribute name="activityId" type="java.lang.Long" />
		<composite:attribute name="socialActivity" type="org.prosolo.common.domainmodel.activitywall.SocialActivity" />
		<composite:attribute name="socialActivityId" type="java.lang.Long" />
		<composite:attribute name="styleClass" type="java.lang.String" />
		<composite:attribute name="oncompleteAfterPost" type="java.lang.String" />
		<composite:attribute name="toRender" default="true"/>
		<composite:attribute name="showBullet" default="false"/>
		<composite:attribute name="resetStyle" default="false"/>
		<composite:attribute name="context" type="java.lang.String" />
	</composite:interface>
	
	<composite:implementation>
		<ui:param name="resetStyle" value="#{cc.attrs.styleClass}" />
		<ui:param name="notResetStyle" value="button green size20 #{cc.attrs.styleClass}" />
		
		<p:commandLink rendered="#{cc.attrs.toRender and cc.attrs.text != null and cc.attrs.link != null}"
			styleClass="#{cc.attrs.resetStyle ? resetStyle : notResetStyle }"
			onclick="$('#newPostDialog').dialog('open');if(statusUpdateDialogNewPost!=null)statusUpdateDialogNewPost.expandPostInput().showLinkLoader().showInputTextLoader();"
			action="#{postDialogBean.preparePostDialog(cc.attrs.text, cc.attrs.link, cc.attrs.context)}"
			actionListener="#{postDialogBean.setOnComplete(cc.attrs.oncompleteAfterPost)}"
			oncomplete="if(typeof yourvar != 'undefined' )statusUpdateDialogNewPost.expandPostInput().showLinkPreview();"
			update=":newPostDialogForm"	>
			<h:panelGroup rendered="#{cc.attrs.showBullet}" class="bullet" />
			Post
		</p:commandLink>
		
		<p:commandLink rendered="#{cc.attrs.toRender and cc.attrs.socialActivity != null}"
			styleClass="#{cc.attrs.resetStyle ? resetStyle : notResetStyle }"
			onclick="$('#newPostDialog').dialog('open');if(typeof yourvar != 'undefined' )statusUpdateDialogNewPost.expandPostInput().showLinkLoader().showInputTextLoader();"
			action="#{postDialogBean.preparePostDialog(cc.attrs.socialActivity, cc.attrs.context)}"
			actionListener="#{postDialogBean.setOnComplete(cc.attrs.oncompleteAfterPost)}"
			oncomplete="if(typeof yourvar != 'undefined' )statusUpdateDialogNewPost.expandPostInput().showLinkPreview();"
			update=":newPostDialogForm"	>
			<h:panelGroup rendered="#{cc.attrs.showBullet}" class="bullet" />
			Post
		</p:commandLink>
		
		<p:commandLink rendered="#{cc.attrs.toRender and cc.attrs.activity != null}"
			styleClass="#{cc.attrs.resetStyle ? resetStyle : notResetStyle }"
			onclick="$('#newPostDialog').dialog('open');"
			action="#{postDialogBean.preparePostDialogForResource(cc.attrs.activity, cc.attrs.context)}"
			actionListener="#{postDialogBean.setOnComplete(cc.attrs.oncompleteAfterPost)}"
			oncomplete="if(typeof yourvar != 'undefined' )statusUpdateDialogNewPost.expandPostInput().showLinkPreview();"
			update=":newPostDialogForm"	>
			<h:panelGroup rendered="#{cc.attrs.showBullet}" class="bullet" />
			Post
		</p:commandLink>
		
		<p:commandLink rendered="#{cc.attrs.toRender and cc.attrs.activityId > 0}"
			styleClass="#{cc.attrs.resetStyle ? resetStyle : notResetStyle }"
			onclick="$('#newPostDialog').dialog('open');"
			action="#{postDialogBean.preparePostDialogForResourceById(cc.attrs.activityId, cc.attrs.context)}"
			actionListener="#{postDialogBean.setOnComplete(cc.attrs.oncompleteAfterPost)}"
			oncomplete="if(typeof yourvar != 'undefined' )statusUpdateDialogNewPost.expandPostInput().showLinkPreview();"
			update=":newPostDialogForm"	>
			<h:panelGroup rendered="#{cc.attrs.showBullet}" class="bullet" />
			Post
		</p:commandLink>
		
		<p:commandLink rendered="#{cc.attrs.toRender and cc.attrs.socialActivityId > 0}"
			styleClass="#{cc.attrs.resetStyle ? resetStyle : notResetStyle }"
			onclick="$('#newPostDialog').dialog('open');"
			action="#{postDialogBean.preparePostDialogForSocialActivityById(cc.attrs.socialActivityId, cc.attrs.context)}"
			actionListener="#{postDialogBean.setOnComplete(cc.attrs.oncompleteAfterPost)}"
			oncomplete="if(typeof yourvar != 'undefined' )statusUpdateDialogNewPost.expandPostInput().showLinkPreview();"
			update=":newPostDialogForm"	>
			<h:panelGroup rendered="#{cc.attrs.showBullet}" class="bullet" />
			Post
		</p:commandLink>
		
	</composite:implementation>
</ui:component>