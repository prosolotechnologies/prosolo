<ui:component
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:composite="http://java.sun.com/jsf/composite"
	xmlns:comp="http://java.sun.com/jsf/composite/components"
	xmlns:utilcomp="http://www.prosolo.com/util"
	xmlns:link="http://java.sun.com/jsf/composite/components/resourceLinks"
	xmlns:post="http://java.sun.com/jsf/composite/components/post"
	xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:c="http://java.sun.com/jsp/jstl/core">

	<composite:interface>
		<composite:attribute name="credId" required="true" />
		<composite:attribute name="credType" required="true" type="org.prosolo.common.domainmodel.credential.CredentialType" />
	</composite:interface>
	
	<composite:implementation>

	 <div id="#{cc.clientId}">
		 <ui:param name="page" value="#{util:getPagePath(view.viewId)}"></ui:param>
		 <ul class="nav nav-tabs headerSubmenu">
		 	<ui:fragment rendered="#{cc.attrs.credId le 0}">
		 		<c:if test="#{cc.attrs.credType eq 'Original'}">
		 			<li role="presentation" class="active">
			 			<a href="javascript:void(0);" data-toggle="tooltip"
		    			   title="Credential must be saved first">Credential Details
		    			</a>
		    		</li>
		 		</c:if>
		 	</ui:fragment>
		 	<ui:fragment rendered="#{cc.attrs.credId gt 0}">
		 		<c:if test="#{cc.attrs.credType eq 'Original'}">
				 	<li 
			        	role="presentation" 
			        	class="#{page  == 'create-credential' 
			        		|| page  == 'credential' ? 'active' : ''}">
			        	<h:link
			        		value="Credential Details"
			        		outcome="create-credential">
			        		<f:param name="id" value="#{utilcomp:encodeId(cc.attrs.credId)}"></f:param>
			        	</h:link>
			        </li>
			        <li 
			        	role="presentation" 
			        	class="#{page  == 'credential-deliveries' ? 'active' : ''}">
			        	<h:link
			        		value="Deliveries"
			        		outcome="credential-deliveries">
			        		<f:param name="id" value="#{utilcomp:encodeId(cc.attrs.credId)}"></f:param>
			        	</h:link>
			        </li>
					<li
						role="presentation"
						class="#{page  == 'credential-privacy' ? 'active' : ''}">
						<h:link
								value="Editors"
								outcome="credential-privacy">
							<f:param name="id" value="#{utilcomp:encodeId(cc.attrs.credId)}"></f:param>
						</h:link>
					</li>
			    </c:if>
			    <c:if test="#{cc.attrs.credType eq 'Delivery'}">
			    	<li 
			        	role="presentation" 
			        	class="#{page  == 'create-credential' 
			        		|| page  == 'credential' ? 'active' : ''}">
			        	<h:link
			        		value="Delivery Details"
			        		outcome="credential">
			        		<f:param name="id" value="#{utilcomp:encodeId(cc.attrs.credId)}"></f:param>
			        	</h:link>
			        </li>
					<li
						role="presentation"
						class="#{page  == 'credential-visibility' ? 'active' : ''}">
						<h:link
							value="Who Can Learn"
							outcome="credential-visibility">
							<f:param name="id" value="#{utilcomp:encodeId(cc.attrs.credId)}"></f:param>
						</h:link>
					</li>
			        <li 
			        	role="presentation"
			        	class="#{util:getPagePath(view.viewId)  == 'credential-students' ? 'active' : ''}">
			        	<h:link
			        		value="Students"
			        		outcome="credential-students">
			        		<f:param name="id" value="#{utilcomp:encodeId(cc.attrs.credId)}"></f:param>
			        	</h:link>
			        </li>
			        <ui:fragment rendered="#{request.isUserInRole('COURSE.INSTRUCTORS.VIEW')}">
				        <li 
				        	role="presentation"
				        	class="#{util:getPagePath(view.viewId)  == 'credential-instructors' ? 'active' : ''}">
				        	<h:link
				        		value="Instructors"
				        		outcome="credential-instructors">
				        		<f:param name="id" value="#{utilcomp:encodeId(cc.attrs.credId)}"></f:param>
				        	</h:link>
				        </li>
				    </ui:fragment>
				    <ui:fragment rendered="#{request.isUserInRole('COURSE.ANNOUNCEMENTS.VIEW')}">
				        <li 
				        	role="presentation"
				        	class="#{util:getPagePath(view.viewId)  == 'announcements' ? 'active' : ''}">
				        	<h:link
				        		value="Announcements"
				        		outcome="/manage/announcements">
				        		<f:param name="id" value="#{utilcomp:encodeId(cc.attrs.credId)}"></f:param>
				        	</h:link>
				        </li>
				    </ui:fragment>
			    </c:if>
			 		
				    <ui:remove><li 
				        	role="presentation"
				        	class="#{(util:getPagePath(view.viewId)  == 'credential-assessments'
				        	 or util:getPagePath(view.viewId)  == 'credential-assessment') ? 'active' : ''}">
				        	<h:link
				        		value="Assessments"
				        		outcome="credential-assessments">
				        		<f:param name="id" value="#{utilcomp:encodeId(cc.attrs.credId)}"></f:param>
				        	</h:link>
				    </li></ui:remove>
				    <ui:remove><ui:fragment rendered="#{request.isUserInRole('MANAGE.CREDENTIAL.RSSFEEDS')}">
				        <li 
				        	role="presentation"
				        	class="#{util:getPagePath(view.viewId)  == 'credential-rss' ? 'active' : ''}">
				        	<h:link
				        		value="RSS Feeds"
				        		outcome="/manage/credential-rss">
				        		<f:param name="id" value="#{utilcomp:encodeId(cc.attrs.credId)}"></f:param>
				        	</h:link>
				        </li>
				    </ui:fragment></ui:remove>
			   
		 	</ui:fragment>
	     </ul>
     </div>
	</composite:implementation>
</ui:component>