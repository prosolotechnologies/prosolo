<ui:component
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:composite="http://java.sun.com/jsf/composite"
	xmlns:p="http://primefaces.org/ui"
	xmlns:util="http://www.prosolo.com/util">

	<composite:interface>
		<composite:attribute name="goal" type="org.prosolo.common.domainmodel.user.LearningGoal"/> 
		<composite:attribute name="goalId" type="java.lang.Long" /> 
		<composite:attribute name="targetGoalId" type="java.lang.Long" /> 
		<composite:attribute name="toRender" default="true" />
		<composite:attribute name="styleClass" />
		<composite:attribute name="title" />
		<composite:attribute name="onclick" type="java.lang.String" />
		<composite:attribute name="regionToUpdate" default=":goalDetailsDialogForm" />
		<composite:attribute name="context" />
		<composite:attribute name="directLink" default="false" />
	</composite:interface>
	
	<composite:implementation>
		<p:commandLink rendered="#{!cc.attrs.directLink and cc.attrs.toRender and cc.attrs.goal != null}"
			styleClass="#{cc.attrs.styleClass}"
			update="#{cc.attrs.regionToUpdate}"
			action="#{goalDialog.initializeOtherGoalDialogById(cc.attrs.goal.id)}"
			actionListener="#{loggingBean.logServiceUse('GOAL_DIALOG', 'context', cc.attrs.context, 'action', 'openLearningGoalDialog', 'goalId', util:longToString(cc.attrs.goal.id))}"
			onclick="#{cc.attrs.onclick};$('#goalDetailsModalDialog').dialog('open');"
			>
			<h:outputText value="#{cc.attrs.title != null ? cc.attrs.title : cc.attrs.goal.title}"/>
		</p:commandLink>
		
		<p:commandLink rendered="#{!cc.attrs.directLink and cc.attrs.toRender and cc.attrs.goalId > 0}"
			styleClass="#{cc.attrs.styleClass}"
			update="#{cc.attrs.regionToUpdate}"
			action="#{goalDialog.initializeOtherGoalDialogById(cc.attrs.goalId)}"
			actionListener="#{loggingBean.logServiceUse('GOAL_DIALOG', 'context', cc.attrs.context, 'action', 'openLearningGoalDialog', 'goalId', util:longToString(cc.attrs.goalId))}"
			onclick="#{cc.attrs.onclick};$('#goalDetailsModalDialog').dialog('open');" 
			>
			<h:outputText value="#{cc.attrs.title != null ? cc.attrs.title : cc.attrs.goal.title}"/>
		</p:commandLink>
		
		<p:commandLink rendered="#{!cc.attrs.directLink and cc.attrs.toRender and cc.attrs.targetGoalId > 0}"
			styleClass="#{cc.attrs.styleClass}"
			update="#{cc.attrs.regionToUpdate}"
			action="#{goalDialog.initializeOtherTargetGoalDialogById(cc.attrs.targetGoalId)}"
			actionListener="#{loggingBean.logServiceUse('GOAL_DIALOG', 'context', cc.attrs.context, 'action', 'openLearningGoalDialog', 'targetGoalId', util:longToString(cc.attrs.targetGoalId))}"
			onclick="#{cc.attrs.onclick};$('#goalDetailsModalDialog').dialog('open');"
			>
			<h:outputText value="#{cc.attrs.title != null ? cc.attrs.title : cc.attrs.goal.title}"/>
		</p:commandLink>
		
		<h:link class="#{cc.attrs.styleClass}" 
			rendered="#{cc.attrs.directLink and cc.attrs.targetGoalId > 0}"
			onclick="sendLogPageNavigationWithParameters('learn', { context: '#{cc.attrs.context}', targetGoalId: #{cc.attrs.targetGoalId}});" 
			value="#{cc.attrs.title}" outcome="/learn">
			<f:param name="id" value="#{cc.attrs.targetGoalId}" />
		</h:link>

	</composite:implementation>
</ui:component>