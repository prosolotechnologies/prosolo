<ui:component
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:composite="http://java.sun.com/jsf/composite"
	xmlns:link="http://java.sun.com/jsf/composite/components/resourceLinks">

	<composite:interface>
		<composite:attribute name="type" />
		<composite:attribute name="title" />
		<composite:attribute name="toRender" default="true" />
		<composite:attribute name="resource" type="org.prosolo.common.domainmodel.general.Node" />
		<composite:attribute name="resourceId" type="java.lang.Long" />
		<composite:attribute name="styleClass" />
		<composite:attribute name="context" />
	</composite:interface>
	
	<composite:implementation>
	
		<h:panelGroup rendered="#{cc.attrs.toRender and cc.attrs.type == 'LearningGoal'}">
			<link:goal toRender="#{cc.attrs.resource != null}"
				goal="#{cc.attrs.resource}" 
				styleClass="#{cc.attrs.styleClass}"
				title="#{cc.attrs.title}" 
				context="#{cc.attrs.context}" />
				
			<link:goal toRender="#{cc.attrs.resourceId > 0}"
				goalId="#{cc.attrs.resourceId}" 
				styleClass="#{cc.attrs.styleClass}"
				title="#{cc.attrs.title}" 
				context="#{cc.attrs.context}" />
		</h:panelGroup>
	
		<h:panelGroup rendered="#{cc.attrs.toRender and cc.attrs.type == 'TargetLearningGoal'}">
			<link:goal toRender="#{cc.attrs.resourceId > 0}"
				targetGoalId="#{cc.attrs.resourceId}" 
				styleClass="#{cc.attrs.styleClass}"
				title="#{cc.attrs.title}" 
				context="#{cc.attrs.context}"/>
		</h:panelGroup>
	
		<h:panelGroup layout="block" rendered="#{cc.attrs.toRender and 
			(cc.attrs.type == 'Competence' or cc.attrs.type == 'TargetCompetence')}">
			<link:competence toRender="#{cc.attrs.resource != null}"
				resource="#{cc.attrs.resource}"
				title="#{cc.attrs.title}"
				type="#{cc.attrs.type}"
				styleClass="#{cc.attrs.styleClass}" 
				context="#{cc.attrs.context}" />
				
			<link:competence toRender="#{cc.attrs.resourceId > 0}"
				resourceId="#{cc.attrs.resourceId}"
				title="#{cc.attrs.title}"
				type="#{cc.attrs.type}"
				styleClass="#{cc.attrs.styleClass}" 
				context="#{cc.attrs.context}" />
		</h:panelGroup>
		
		<h:panelGroup rendered="#{cc.attrs.toRender and cc.attrs.type == 'Activity'}">
			<link:activity toRender="#{cc.attrs.resource != null}"
				activity="#{cc.attrs.resource}"
				styleClass="#{cc.attrs.styleClass}"
				title="#{cc.attrs.title}" 
				context="#{cc.attrs.context}" />
				
			<link:activity toRender="#{cc.attrs.resourceId > 0}"
				activityId="#{cc.attrs.resourceId}"
				styleClass="#{cc.attrs.styleClass}"
				title="#{cc.attrs.title}"  
				context="#{cc.attrs.context}" />
		</h:panelGroup>
		
		<h:panelGroup rendered="#{cc.attrs.toRender and cc.attrs.type == 'TargetActivity'}">
			<link:activity toRender="#{cc.attrs.resource != null}"
				targetActivity="#{cc.attrs.resource}"
				styleClass="#{cc.attrs.styleClass}"
				title="#{cc.attrs.title}" 
				context="#{cc.attrs.context}" />
				
			<link:activity toRender="#{cc.attrs.resourceId > 0}"
				targetActivityId="#{cc.attrs.resourceId}"
				styleClass="#{cc.attrs.styleClass}"
				title="#{cc.attrs.title}"  
				context="#{cc.attrs.context}" />
		</h:panelGroup>
		
		<h:panelGroup rendered="#{cc.attrs.toRender and cc.attrs.type == 'Course'}">
			<h:link value="#{cc.attrs.title}" outcome="/course">
				<f:param name="id" value="#{cc.attrs.resourceId}" />
			</h:link>
		</h:panelGroup>
		
	<ui:remove>
		<h:panelGroup rendered="#{cc.attrs.toRender and cc.attrs.type == 'status'}">
			<link:status
				status="#{cc.attrs.resource}"
				styleClass="#{cc.attrs.styleClass}" />
		</h:panelGroup>
	</ui:remove>
	<ui:remove>
		<h:panelGroup rendered="#{cc.attrs.toRender and cc.attrs.type == 'GoalNote'}">
			<link:goalNote
				goalNote="#{cc.attrs.resource}"
				styleClass="#{cc.attrs.styleClass}" />
		</h:panelGroup>
	</ui:remove>
	
		<h:panelGroup rendered="#{cc.attrs.toRender and cc.attrs.type == 'User'}">
			<link:user
				user="#{cc.attrs.resource}"
				styleClass="#{cc.attrs.divClass}"
				mode="name"
				context="#{cc.attrs.context}.name" />
		</h:panelGroup>
		
		<h:panelGroup rendered="#{cc.attrs.toRender and (cc.attrs.type == 'AchievedCompetence' || 
				cc.attrs.type == 'CompletedGoal')}">
			<span class="bold">#{cc.attrs.title}</span>
		</h:panelGroup>
		
		<h:panelGroup rendered="#{cc.attrs.toRender and (cc.attrs.type == 'ExternalCredit')}">
			<link:externalCredit toRender="#{cc.attrs.resourceId > 0}"
				styleClass="#{cc.attrs.styleClass}"
				title="#{cc.attrs.title}"  
				context="#{cc.attrs.context}" />
		</h:panelGroup>

		<h:panelGroup rendered="#{cc.attrs.toRender and 
			cc.attrs.type != 'LearningGoal' and cc.attrs.type != 'TargetLearningGoal' and 
			cc.attrs.type != 'Competence' and cc.attrs.type != 'TargetCompetence' and 
			cc.attrs.type != 'Activity' and cc.attrs.type != 'status' and 
			cc.attrs.type != 'GoalNote' and cc.attrs.type != 'User' and 
			cc.attrs.type != 'AchievedCompetence' and cc.attrs.type != 'ExternalCredit' and
			cc.attrs.type != 'TwitterPost' and cc.attrs.type != 'TargetActivity' and 
			cc.attrs.type != 'Course'}">
			<span class="bold">#{cc.attrs.title}</span>
		</h:panelGroup>
	</composite:implementation>
</ui:component>