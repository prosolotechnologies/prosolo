<ui:component
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:composite="http://java.sun.com/jsf/composite"
	xmlns:p="http://primefaces.org/ui">

	<composite:interface>
		<composite:attribute name="activity" type="org.prosolo.common.domainmodel.activities.Activity" /> 
		<composite:attribute name="activityId" type="java.lang.Long" /> 
		<composite:attribute name="targetActivity" type="org.prosolo.common.domainmodel.activities.TargetActivity" /> 
		<composite:attribute name="targetActivityId" type="java.lang.Long" /> 
		<composite:attribute name="toRender" default="true" />
		<composite:attribute name="styleClass" />
		<composite:attribute name="regionToUpdate" default=":activityDetailsForm" />
		<composite:attribute name="onclick" type="java.lang.String" />
		<composite:attribute name="title" type="java.lang.String" />
		<composite:attribute name="targetCompIdToPreselectWhenAdding" />
		<composite:attribute name="toUpdateAfterAddingToCompetence" />
		<composite:attribute name="context" />
	</composite:interface>
	
	<composite:implementation>
		<p:commandLink
			rendered="#{cc.attrs.toRender and cc.attrs.activity != null}"
			styleClass="#{cc.attrs.styleClass}"
			update="#{cc.attrs.regionToUpdate}"
			action="#{activityDetailsBean.openActivityDetails(cc.attrs.activity)}"
			onclick='#{cc.attrs.onclick};$("#activityDetailsModalDialog").dialog("open");'>
			
			<h:outputText value="#{cc.attrs.title != null ? cc.attrs.title : cc.attrs.activity.title}"/>
	
			<f:actionListener binding="#{loggingBean.logServiceUse('ACTIVITY_DIALOG', 'context', cc.attrs.context, 'action', 'openActivityDetails', 'activityId', cc.attrs.activity.id)}" />
			<f:actionListener binding="#{activityDetailsBean.setTargetCompIdToPreselectWhenAdding(cc.attrs.targetCompIdToPreselectWhenAdding)}" />
			<f:actionListener binding="#{activityDetailsBean.setToUpdateAfterAddingToCompetence(cc.attrs.toUpdateAfterAddingToCompetence)}" />
		</p:commandLink>
		
		
		<p:commandLink
			rendered="#{cc.attrs.toRender and cc.attrs.activityId > 0}"
			styleClass="#{cc.attrs.styleClass}"
			update="#{cc.attrs.regionToUpdate}"
			action="#{activityDetailsBean.openActivityDetailsById(cc.attrs.activityId)}"
			onclick='#{cc.attrs.onclick};$("#activityDetailsModalDialog").dialog("open");'>
			
			<h:outputText value="#{cc.attrs.title != null ? cc.attrs.title : cc.attrs.activity.title}" />
	
			<f:actionListener binding="#{loggingBean.logServiceUse('ACTIVITY_DIALOG', 'context', cc.attrs.context, 'action', 'openActivityDetails', 'activityId', cc.attrs.activityId)}" />
			<f:actionListener binding="#{activityDetailsBean.setTargetCompIdToPreselectWhenAdding(cc.attrs.targetCompIdToPreselectWhenAdding)}" />
			<f:actionListener binding="#{activityDetailsBean.setToUpdateAfterAddingToCompetence(cc.attrs.toUpdateAfterAddingToCompetence)}" />
		</p:commandLink>
		
		<p:commandLink
			rendered="#{cc.attrs.toRender and cc.attrs.targetActivity != null}"
			styleClass="#{cc.attrs.styleClass}"
			update="#{cc.attrs.regionToUpdate}"
			action="#{activityDetailsBean.openActivityDetailsForTargetActivity(cc.attrs.targetActivity)}"
			onclick='#{cc.attrs.onclick};$("#activityDetailsModalDialog").dialog("open");'>
			
			<h:outputText value="#{cc.attrs.title != null ? cc.attrs.title : cc.attrs.activity.title}"/>
	
			<f:actionListener binding="#{loggingBean.logServiceUse('ACTIVITY_DIALOG', 'context', cc.attrs.context, 'action', 'openActivityDetails', 'targetActivityId', cc.attrs.targetActivity.id)}" />
			<f:actionListener binding="#{activityDetailsBean.setTargetCompIdToPreselectWhenAdding(cc.attrs.targetCompIdToPreselectWhenAdding)}" />
			<f:actionListener binding="#{activityDetailsBean.setToUpdateAfterAddingToCompetence(cc.attrs.toUpdateAfterAddingToCompetence)}" />
		</p:commandLink>
		
		<p:commandLink
			rendered="#{cc.attrs.toRender and cc.attrs.targetActivityId > 0}"
			styleClass="#{cc.attrs.styleClass}"
			update="#{cc.attrs.regionToUpdate}"
			action="#{activityDetailsBean.openActivityDetailsByTargetActivityId(cc.attrs.targetActivityId)}"
			onclick='#{cc.attrs.onclick};$("#activityDetailsModalDialog").dialog("open");'>
			
			<h:outputText value="#{cc.attrs.title != null ? cc.attrs.title : cc.attrs.activity.title}" />
	
			<f:actionListener binding="#{loggingBean.logServiceUse('ACTIVITY_DIALOG', 'context', cc.attrs.context, 'action', 'openActivityDetails', 'targetActivityId', cc.attrs.targetActivityId)}" />
			<f:actionListener binding="#{activityDetailsBean.setTargetCompIdToPreselectWhenAdding(cc.attrs.targetCompIdToPreselectWhenAdding)}" />
			<f:actionListener binding="#{activityDetailsBean.setToUpdateAfterAddingToCompetence(cc.attrs.toUpdateAfterAddingToCompetence)}" />
		</p:commandLink>
	</composite:implementation>
</ui:component>