<ui:composition
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:comp="http://java.sun.com/jsf/composite/components"
	xmlns:dlg="http://java.sun.com/jsf/composite/components/dialogs"
	xmlns:util="http://www.prosolo.com/util"
	xmlns:link="http://java.sun.com/jsf/composite/components/resourceLinks">
	
	<h:outputStylesheet library="css" name="jquery.bxslider.css"  />
	<h:outputScript library="javascript" name="jquery.bxslider.js" target="head" />

	<div id="badgeListDialog" title="Badges" class="badgesDialog" style="display: none;">
		
		<h:form id="badgeListForm" prependId="false" class="badgeList">
			<p:growl id="badgeListDialogGrowl" showDetail="true" />

			<ui:repeat value="#{util:mapToList(badgelist.badges)}" var="badge" id="badgeListRepeat2" varStatus="iterator">
				<div class="badge">
					<div class="badgeContainer badgeContainer20">
						<div
							class="badge badge-#{badge.key.type.toString().toLowerCase()}" />
					</div>
					<div class="info">
						<span class="title">#{badge.key.title}</span> <span class="count">(#{badge.value.size()})</span>
					</div>

					<div class="evaluators slider">
						<div>
							<a href="#" class="leftNavAvatar control left">
								<span class="leftArrow hover"></span>
							</a>

							<div class="scrollable" id="scrollable">
								<div class="items">
									<ui:repeat value="#{badge.value}" var="user" varStatus="avatarIterator">
										<div class="userContainer">
											<link:user value="userDetails" user="#{user}" mode="image"
												imageSize="30" idPrefix="badgeEvaluator#{iterator.index}"
												context="badgeList.image" />
										</div>
									</ui:repeat>
								</div>
							</div>
							
							<a href="#" class="rightNavAvatar control right">
								<span class="rightArrow hover"></span>
							</a>
							
							<span class="pager"></span>
						</div>
					</div>
				</div>
			</ui:repeat>

			<script>
				$(function() {
					roundImages();
					
					$('.badgesDialog .badge .slider .items').bxSlider({
						slideWidth: 50,
						slideMargin: 0,
						minSlides: 1,
						maxSlides: 4,
						infiniteLoop: false,
						slideSelector: '.badgesDialog .badge .slider .userContainer',
						prevSelector: '.badgesDialog .badge .slider .leftNavAvatar',
						nextSelector: '.badgesDialog .badge .slider .rightNavAvatar',
						pagerSelector: '.badgesDialog .badge .slider .pager'
					});
				});
			</script>
		</h:form>
	</div>
	<script>
		$(function() {
			$('#badgeListDialog').dialog({
				autoOpen : false,
				show : 'slide',
				modal : true,
				width : 500,
				resizable : false,
				open : function(event, ui) {
					$(this).children(':first')
						.css('text-align', 'center')
						.css('padding-top', '50px')
						.html('<img src="#{request.contextPath}/resources/images/style/ajax-loader-black.gif" style="vertical-align:middle;"/>');
				}
			});
			$('#badgeListDialog').show();
		});
	</script>
</ui:composition>