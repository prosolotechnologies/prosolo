<ui:composition
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:func="http://org.prosolo/functions"
	xmlns:composite="http://java.sun.com/jsf/composite"
	xmlns:comp="http://java.sun.com/jsf/composite/components">
		
	<div id="activityListFormModalDialog" title="Activities" style="display: none;">
		<h:form id="exCreditActivityListForm">
			<p:growl id="exCreditActivityListGrowl" showDetail="true" />
							bla

			<h:panelGroup layout="block" rendered="${portfolio.toEditExternalCredit}">
				<comp:newpostNoForm value="newCreditActivity"
					content="#{portfolio.newActivityForExCreditData}" 
					createPostAction="#{portfolio.createNewPost()}"
					handleFileUpload="#{portfolio.handleFileUpload}"
					containerDiv="#activityListFormModalDialog"
					regionToRefresh=":exCreditActivityListForm"
					actionButtonName="Add"
					watermark="Add activity..." />
			</h:panelGroup>
			
			<h:panelGroup layout="block" rendered="${!portfolio.toEditExternalCredit}">
				<comp:planused
					id="exCreditActivities"
					parentid="activityListFormModalDialog"
					activities="#{portfolio.editedExternalCredit.activities}"
					cantdisplaymessage="No activities added."
				/>
			</h:panelGroup>
			<h:panelGroup layout="block" rendered="${portfolio.toEditExternalCredit}">
				<comp:planused
					id="exCreditActivitiesEdit"
					parentid="activityListFormModalDialog"
					activities="#{portfolio.editedExternalCredit.activities}"
					cantdisplaymessage="No activities added."
					removeActivityMethod="#{portfolio.removeActivity()}"
					activityToRemoveHolder="#{portfolio.activityToDelete}"
				/>
			</h:panelGroup>
			
			<p:commandLink update=":exCreditActivityListForm" actionListener="#{portfolio.resetExCreditAddActivityForm()}" styleClass="reset" style="display:none;" value="reset" />
		</h:form>
	</div>
	<script>
		$(function() {
			$('#activityListFormModalDialog').dialog({
				autoOpen : false,
				show : 'slide',
				width : 500,
				modal : true,
				resizable : false,
				open : function(event, ui) {
					$(this).children(':first')
						.css('text-align', 'center')
						.css('padding-top', '50px')
						.html('<img src="#{request.contextPath}/resources/images/style/ajax-loader-black.gif" style="vertical-align:middle;"/>');
				}, 
				close: function() {
					$('#exCreditActivityListForm .reset').trigger('click');
				}
			});
			$('#activityListFormModalDialog').show();
		});
	</script>
</ui:composition>