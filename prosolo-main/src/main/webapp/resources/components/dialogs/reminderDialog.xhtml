<ui:composition
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:comp="http://java.sun.com/jsf/composite/components">
	
	<div id="remainderDetailsFormModalDialog" title="Reminder details" style="display: none;">
		
		<h:form id="reminderDetailsFormDialog">
			<p:growl id="reminderDetailsFormDialogGrowl" showDetail="true" />
			
			<h:panelGroup layout="block" id="remainderDetailsForm" styleClass="reminderDetails">
				
				<h:panelGroup rendered="#{reminderBeanDialog.haveReminder}">
					<table id="compDetailsTable">
						<tr>
							<td class="col1">Reminder</td>
							<td>
								<h:outputFormat value="#{rmdmsgs.label_reminder}">
									<f:param value="#{reminderBeanDialog.reminder.resourceType}" />
									<f:param value="#{reminderBeanDialog.reminder.title}" />
									
								</h:outputFormat>
								deadline is
								<h:outputFormat	value="#{reminderBeanDialog.reminder.deadline}">
									<f:convertDateTime dateStyle="full" />
								</h:outputFormat>
							</td>
						</tr>
						<tr>
							<td class="col1">Name</td>
							<td>#{reminderBeanDialog.reminder.title}</td>
						</tr>
						<tr>
							<td class="col1">Description:</td>
							<td colspan="2">
								<h:outputText class="description" id="reminderDescription"
									value="#{reminderBeanDialog.reminder.description}" />
							</td>
						</tr>
						<tr>
							<td class="col1"><label for="deadline">Deadline:</label></td>
							<td colspan="2">
								<h:outputFormat id="deadline"
									value="#{reminderBeanDialog.reminder.deadline}">
									<f:convertDateTime dateStyle="full" />
								</h:outputFormat>
							</td>
						</tr>
					</table>

					<script>
						$('#remainderDetailsFormModalDialog .description').readmore({
							maxHeight: 60,
							afterToggle: function(trigger, elem, expanded) {
								sendServiceUse('MOUSE_CLICK', {context: 'reminderDialog.#{reminderBeanDialog.reminder.reminder.id}.description', link: expanded ? 'more' : 'less'});
							}
						});
					</script>
				</h:panelGroup>

			
				<h:panelGroup layout="block" class="reminderActionButtons" id="reminderActionButtonsIndex"
					 rendered="#{view.viewId=='/index.xhtml'}">
					 
					<p:commandLink id="dismissReminderButtonIndex" value="DISMISS"
						styleClass="button green size30 right"
					 	onclick="$('#remainderDetailsFormModalDialog').dialog('close');"
						action="#{reminderBeanDialog.dismissReminder()}"
						process="@this"
						update=":remindersForm:remindersPanel :reminderDetailsFormDialog:reminderDetailsFormDialogGrowl" />
				</h:panelGroup>
				
				<h:panelGroup layout="block" class="reminderActionButtons" id="reminderActionButtonsFilter"
				 	rendered="#{view.viewId!='/index.xhtml'}">
				 
					<p:commandLink id="dismissReminderButtonFilter" value="DISMISS"
						styleClass="button green size30 right"
						onclick="$('#remainderDetailsFormModalDialog').dialog('close');"
						action="#{reminderBeanDialog.dismissReminder()}"
						process="@this"
						update=":remindersForm:resultContainer :reminderDetailsFormDialog:reminderDetailsFormDialogGrowl" />
						
				</h:panelGroup>
			</h:panelGroup>
		</h:form>
	</div>
	
	<script>
	$(function() {
		$( '#remainderDetailsFormModalDialog' ).dialog({
			autoOpen: false,
			show : 'slide',
			width: 500,
			modal: true,
			resizable: false,
			open: function(event, ui) { 
				 $(this).children(':first')
				 	.css('text-align','center')
				 	.css('padding-top','50px')
				 	.html('<img src="resources/images/style/ajax-loader-black.gif" style="vertical-align:middle;"/>');
			}
		});
		$('#remainderDetailsFormModalDialog').show();
	});
	</script>
</ui:composition>