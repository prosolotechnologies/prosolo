<ui:component
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:composite="http://java.sun.com/jsf/composite"
	xmlns:p="http://primefaces.org/ui"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:comp="http://java.sun.com/jsf/composite/components"
	xmlns:dlg="http://java.sun.com/jsf/composite/components/dialogs"
	xmlns:util="http://www.prosolo.com/util"
	xmlns:utilcomp="http://java.sun.com/jsf/composite/components/util">

	<composite:interface>
		<composite:attribute name="competence"/>
	</composite:interface>
	
	<composite:implementation>
		<utilcomp:messagesBundle var="msg" />
		
		<div id="competenceStatisticsDialog" title="Competence Statistics" class="competenceStatisticsDialog" style="display: none;">
			<h:form id="competenceStatisticsDialogForm" prependId="false">
				
				<table>
					<tr>
						<td>#{msg['dialog.analytics.competence.likes']}</td>
						<td>#{competenceAnalyticsBean.data.numOfLikes}</td>
					</tr>
					<tr>
						<td>#{msg['dialog.analytics.competence.dislikes']}</td>
						<td>#{competenceAnalyticsBean.data.numOfDislikes}</td>
					</tr>
					<tr>
						<td>#{msg['dialog.analytics.competence.averageCompletionTime']}</td>
						<td>#{competenceAnalyticsBean.data.averageTime}</td>
					</tr>
					<tr>
						<td>#{msg['dialog.analytics.competence.numberOfAchieving']}</td>
						<td>#{competenceAnalyticsBean.data.numOfUsersAchieving}</td>
					</tr>
				</table>
				
				<div class="clear marginBottom10"></div>
				
				<a class="button gray size30 right"
					onclick="$('#competenceStatisticsDialog').dialog('close');"
					>Close</a>										
	
			</h:form>
		</div>
		<script>
			$(function() {
				$('#competenceStatisticsDialog').dialog({
					autoOpen : false,
					show : 'slide',
					modal : true,
					width : 300,
					resizable : false,
					open: function(event, ui) { 
						$(this).children(':first')
							.css('text-align', 'center')
							.css('padding-top', '50px')
							.html('<img src="#{request.contextPath}/resources/images/style/ajax-loader-black.gif" style="vertical-align:middle;"/>');
					},
				});
				$('#competenceStatisticsDialog').show();
			});
		</script>
	</composite:implementation>
</ui:component>