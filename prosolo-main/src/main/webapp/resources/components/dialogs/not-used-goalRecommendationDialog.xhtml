<ui:component
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:func="http://org.prosolo/functions"
	xmlns:comp="http://java.sun.com/jsf/composite/components"
	xmlns:composite="http://java.sun.com/jsf/composite"
	xmlns:dlg="http://java.sun.com/jsf/composite/components/dialogs"
	xmlns:link="http://java.sun.com/jsf/composite/components/resourceLinks"
	xmlns:utilcomp="http://java.sun.com/jsf/composite/components/util">

	<composite:interface>
	</composite:interface>
	
	<composite:implementation>
		<utilcomp:messagesBundle var="msg" />
		
		<h:outputScript library="javascript" name="jquery.autosize.min.js" target="head" />
		
		<div id="goalRecommendationModalDialog" title="Recommend Learning Goal" style="display: none;">
	
			<h:form id="goalRecommendationFormId" prependId="false" class="goalRecommendationForm">
				<div class="goaltitle">#{recommendLearningGoalBean.title}</div>
				
				<table>
					<tr>
						<td class="col1">To:</td>
						<td>
							<link:user value="userDetails" 
			    				userData="#{recommendLearningGoalBean.receiver}"
			    				mode="imageName"
			    				imageSize="22"
			    				idPrefix="goalRecommendation"
			    				context="goalRecommendationDialog"/>
						</td>
					</tr>
					<tr>
						<td class="label col1">
							<h:outputLabel for="messageContent">Message:</h:outputLabel>
						</td>
						<td>
							<h:inputTextarea styleClass="messageTextarea" id="messageContent"
								value="#{recommendLearningGoalBean.messageContent}" 
								placeholder="#{msg['textarea.message']}"/>
								
							<script>
								$(function() {
									$('#goalRecommendationModalDialog .messageTextarea').autosize(); 
								});
							</script>
						</td>
					</tr>
				</table>
	
				<p:commandButton id="saveButton" value="Send" type="submit"
					styleClass="button green size30 right"
					onclick='$("#goalRecommendationModalDialog").dialog("close");'
					actionListener="#{recommendLearningGoalBean.sendLearningGoalRecommendation}"
					update="newLearningGoalRecommendationFormGrowl" />
	
				<p:commandButton id="cancelButton" value="Cancel" type="button"
					styleClass="button gray size30 right"
					onclick='$("#goalRecommendationModalDialog").dialog("close");' />
	
				<p:growl id="newLearningGoalRecommendationFormGrowl" showDetail="true" />
				
				<script>
				$(function() {
					roundImages();
				});
				</script>
			</h:form>
		</div>
			
		<script>
		$(function() {
			$('#goalRecommendationModalDialog').dialog({
				autoOpen: false,
				width: 465,
				show: 'slide',
				resizable: false,
				modal: true,
				open: function(event, ui) { 
					$(this).children(':first')
						.css('text-align', 'center')
						.css('padding-top', '50px')
						.html('<img src="#{request.contextPath}/resources/images/style/ajax-loader-black.gif" style="vertical-align:middle;"/>');
				}
			});
		});
	
		function openGoalRecommendationDialog(){
			$('#goalRecommendationModalDialog').dialog('open');
		}
		</script>
	</composite:implementation>
</ui:component>