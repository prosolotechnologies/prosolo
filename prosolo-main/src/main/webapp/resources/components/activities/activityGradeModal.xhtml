<ui:component
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:composite="http://java.sun.com/jsf/composite"
	xmlns:comp="http://java.sun.com/jsf/composite/components"
	xmlns:utilcomp="http://java.sun.com/jsf/composite/components/util"
	xmlns:link="http://java.sun.com/jsf/composite/components/resourceLinks"
	xmlns:post="http://java.sun.com/jsf/composite/components/post"
	xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:courses="http://java.sun.com/jsf/composite/components/courses"
	xmlns:socialWall="http://java.sun.com/jsf/composite/components/socialWall"
	xmlns:util="http://www.prosolo.com/util"
	xmlns:c="http://java.sun.com/jsp/jstl/core">

	<composite:interface>
		<composite:attribute name="bean"/>
		<composite:attribute name="assessment" required="true" />
		<composite:attribute name="toUpdate" default=""/>
		<composite:attribute name="minGrade" required="true"/>
		<composite:attribute name="maxGrade" required="true"/>
	</composite:interface>
	
	<composite:implementation>
		<h:outputStylesheet library="css2" name="bootstrap-slider.css"  />
		<script	src="#{request.contextPath}/resources/javascript2/bootstrap-slider.min.js"></script>
		
		<div id="#{cc.clientId}">
			<h:form id="formGradeModal">
		    	<div class="modal fade newFeedModal" id="assessmentGradeModal1" tabindex="-1" role="dialog" aria-labelledby="assessGradeModal">
		           <div class="modal-dialog">
		               <h:panelGroup id="panelGradeModal" layout="block" styleClass="modal-content">
		               	<ui:fragment rendered="#{not empty cc.attrs.assessment}">
		                   <div class="modal-header alignLeft">
		                       <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&#215;</span></button>
		                       <h2 class="modal-title">Grade</h2>
		                   </div>
		                   <div class="modal-body alignLeft">
		                       
		                       <ui:remove>
		                       <h:selectOneMenu styleClass="selectpicker"
		                       		value="#{cc.attrs.assessment.grade.value}">
		                       		<f:selectItem itemValue="#{null}" itemLabel="-"></f:selectItem>
		                       		<c:forEach var="it" 
		                       			begin="#{cc.attrs.minGrade}" 
		                       			end="#{cc.attrs.maxGrade}" 
		                       			step="1">
		                       			<f:selectItem itemValue="#{it}" itemLabel="#{it}"></f:selectItem>
		                       		</c:forEach>
		                       </h:selectOneMenu>
		                       <script>$('.selectpicker').selectpicker('refresh');</script>
		                       </ui:remove>
		                       
								<div class="sliderBox">
									<div class="sliderWrapper">
										<input type="text" id="gradeSlider" class="gradeSlider" />
									</div>
									<h:inputText value="#{cc.attrs.assessment.grade.value}" id="gradeValue" class="sliderValueInput" />
									<script>
									var gradeSlider = $("#gradeSlider").bootstrapSlider({
										id: 'gradeSlider',
										min: #{cc.attrs.assessment.grade.minGrade},
										max: #{cc.attrs.assessment.grade.maxGrade},
										value: #{cc.attrs.assessment.grade.value},
										tooltip: 'hide'
									});
									gradeSlider.bootstrapSlider('on', 'slide', function(){
										$('.sliderValueInput').val(gradeSlider.bootstrapSlider('getValue'));
									});
									$('.sliderValueInput').bind('propertychange change click keyup input paste', function() {
										gradeSlider.bootstrapSlider('setValue', parseInt($(this).val()));
									});
									</script>
								</div>
							</div>
		                       
							<div class="modal-footer alignLeft">
		                       <p:commandLink 
		                       		styleClass="btn btn-green"
		                       		action="#{cc.attrs.bean.updateGrade()}"
		                       		update="#{cc.attrs.toUpdate}"
		                       		oncomplete="$('#assessmentGradeModal1').modal('hide');">
		                       		Done
		                       </p:commandLink>
		                       <a href="#" class="btn btn-default" data-dismiss="modal">Cancel</a>
		                   </div>
		                 </ui:fragment>
		               </h:panelGroup>
		           </div>
		       </div>
		    </h:form>
		</div>
	</composite:implementation>
</ui:component>