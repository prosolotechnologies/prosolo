<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:comp="http://java.sun.com/jsf/composite/components"
	xmlns:p="http://primefaces.org/ui"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions"
	xmlns:util="http://www.prosolo.com/util"
	xmlns:dlg="http://java.sun.com/jsf/composite/components/dialogs"
	xmlns:dlgAnalytics="http://java.sun.com/jsf/composite/components/dialogs/analytics"
	xmlns:utilcomp="http://java.sun.com/jsf/composite/components/util">

<ui:insert name="metadata" />

<h:head>
	<f:facet name="first">
		<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
		<link rel="icon" href="#{request.contextPath}/favicon.ico" type="image/x-icon" />
		<title><ui:insert name="windowTitle" /></title>
	</f:facet>
	
	<link rel="stylesheet" type="text/css" media="all" href="#{request.contextPath}/resources/css/prosolo-theme/jquery-ui-1.8.21.custom.css" />
	<link rel="stylesheet" type="text/css" media="all" href="#{request.contextPath}/resources/css/jquery.qtip.min.css" />
	<link rel="stylesheet" type="text/css" media="all" href="#{request.contextPath}/resources/css/tauCharts.min.css" />
	<link rel="stylesheet" type="text/css" media="all" href="#{request.contextPath}/resources/css/dashboard.css" />
	<link rel="stylesheet" type="text/css" media="all" href="#{request.contextPath}/resources/css/style.css?#{loggeduser.loginTime}" />
	
	<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css" rel="stylesheet" />
 	<link href='http://fonts.googleapis.com/css?family=Open+Sans:400,300,600,700,400italic,600italic,800' rel='stylesheet' type='text/css' />
	
	<script src="#{request.contextPath}/resources/javascript/jquery-ui-1.11.2.min.js"></script>
	<script src="#{request.contextPath}/resources/javascript/jquery.ui.dialog.closeOnClickOutside.min.js"></script>
	<script src="#{request.contextPath}/resources/javascript/custom.js"></script>
	<script	src="#{request.contextPath}/resources/javascript/jquery.shortenedText.js"></script>
	<script	src="#{request.contextPath}/resources/javascript/jquery.moreLessBox.js"></script>
	<script	src="#{request.contextPath}/resources/javascript/jquery.autosize.min.js"></script>
	<script	src="#{request.contextPath}/resources/javascript/jquery.qtip.min.js"></script>
	<script	src="#{request.contextPath}/resources/javascript/jquery.qtip.prosolo.js"></script>
	
	<script	src="#{request.contextPath}/resources/javascript/prosolo.search.js"></script>
	<script	src="#{request.contextPath}/resources/javascript/prosolo.bigTooltipControl.js"></script>
	<script	src="#{request.contextPath}/resources/javascript/prosolo.logging.js"></script>
	<script	src="#{request.contextPath}/resources/javascript/prosolo.overlay.js"></script>
	
	<script src="https://www.youtube.com/iframe_api"/>
	<script	src="#{request.contextPath}/resources/javascript/youtubevideo.js"></script>
	
	<script	src="#{request.contextPath}/resources/javascript/d3.min.js"></script>
	<script	src="#{request.contextPath}/resources/javascript/underscore-min.js"></script>
	<script	src="#{request.contextPath}/resources/javascript/tauCharts.min.js"></script>
	<script	src="#{request.contextPath}/resources/javascript/prosolo.dashboard-datepicker.js"></script>
	<script	src="#{request.contextPath}/resources/javascript/prosolo.dashboard-service.js"></script>
	<script	src="#{request.contextPath}/resources/javascript/prosolo.dashboard-chart.js"></script>
	<script	src="#{request.contextPath}/resources/javascript/prosolo.dashboard.js"></script>
	
	
</h:head>

<h:body>
	<utilcomp:messagesBundle var="msg" />
	
	<div>
		<div id="headerWrapper">
			<div class="header">
				<div id="headerLeft">
					<div class="mainLogos">
						
						<h:link
							onclick="sendLogPageNavigation('/admin/users','mainmenu');" 
							outcome="/admin/users">
							<span class="secAdmin"></span>
						</h:link>
						
						<h:panelGroup layout="block" rendered="#{loggeduser.hasRole('manager') or loggeduser.hasRole('admin')}">
							<a class="arrow" href="javascript:void(0);">
								<i class="fa fa-angle-down"></i>
							</a>
							
							<div class="dropdown hidden">
								<ul>
									<li>
										<h:link onclick="sendLogPageNavigation('index','mainmenu');" 
											outcome="/index">
											<span class="logo"></span>
										</h:link>
									</li>
									<li>
										<h:link rendered="#{loggeduser.hasRole('manager')}"
											onclick="sendLogPageNavigation( '/manage/competences', 'mainmenu');" 
											outcome="/manage/competences">
											<span class="secManage"></span>
										</h:link>
									</li>
								</ul>
							</div>
						</h:panelGroup>
					</div>
				
					<h:form>
						<ul class="navigation"> 
							<li class="#{util:getPagePath(view.viewId)  == 'users' ? 'selected' : ''}">
								<h:link 
									onclick="sendLogPageNavigation( '/admin/users','mainmenu');"
									value="Users" 
									outcome="/admin/users" />
							</li>
							<li class="#{util:getPagePath(view.viewId)  == 'roles' ? 'selected' : ''}">
								<h:link
									onclick="sendLogPageNavigation( '/admin/roles','mainmenu');"
									value="Roles"
									outcome="/admin/roles" />
							</li>
							<li class="#{util:getPagePath(view.viewId)  == 'dashboard' ? 'selected' : ''}">
								<h:link
									onclick="sendLogPageNavigation( '/admin/dashboard','mainmenu');"
									value="Dashboard"
									outcome="/admin/dashboard" />
							</li>
							<li class="#{util:getPagePath(view.viewId)  == 'settings' ? 'selected' : ''}">
								<h:link
									onclick="sendLogPageNavigation( '/admin/settings', 'mainmenu');"
									value="Settings"
									outcome="/admin/settings" />
							</li>
						</ul>
					</h:form>
				</div>
			
				<div id="headerRight">
					<div id="name">
						<a class="arrow" href="javascript:void(0);">
							<h:panelGroup id="avatarContainer">
								<span class="headerAvatar">
									<h:graphicImage styleClass="imageRound image30"
										value="#{profileSettings.accountData.avatarPath}"
										width="30" height="30" alt="" />
								</span>
							</h:panelGroup>
							
							<h:panelGroup id="userNameContainer">
								<h:outputText id="userName" value="#{loggeduser.name} #{loggeduser.lastName}" />
								<script>
									$('#userName').shortenedText({
										mode : 'show-first-word',
										showChar : 12
									})
								</script>
							</h:panelGroup>
							<i class="fa fa-angle-down"></i>
						</a>
						
						<div class="dropdown hidden">
							<ul>
								<h:form id="userLogoutFormId">
									<li>
										<h:link 
											onclick="sendLogPageNavigation('diggest','mainmenu');" 
											value="Digest" 
											outcome="/digest" />
									</li>
									<li>
										<h:link 
											onclick="sendLogPageNavigation('communications','mainmenu');" 
											value="Communications" 
											outcome="/communications" />
									</li>
									<li>
										<h:link 
											onclick="sendLogPageNavigation('search','mainmenu');" 
											value="Search" 
											outcome="/search" />
									</li>
									<li>
										<h:link 
											onclick="sendLogPageNavigation('settings','mainmenu');" 
											value="Settings" 
											outcome="/settings" />
									</li>
									<li>
										<h:commandLink id="userLogout" 
											value="Logout" 
											action="#{loggeduser.logout}">
										</h:commandLink>
									</li>
								</h:form>
							</ul>
						</div>
					</div>
					
					<div class="mainMenuButtons">
							<ui:include	src="/resources/components/topmenunotifications.xhtml" />
							<ui:include	src="/resources/components/topmenuinbox.xhtml" />
							<ui:include src="/resources/components/topmenusearch.xhtml" />
						</div>
				</div>
			</div>
		</div>
		<!-- #headerWrapper end -->
		
		<ui:insert name="content" />
		<!-- .container end -->
		
		<comp:footer />
	</div>
	
 	<dlg:addToGoal id="addToGoal" />
	<ui:include src="/resources/components/dialogs/compDetailsDialog.xhtml" />
	<ui:include	src="/resources/components/dialogs/goalDetailsDialog.xhtml" />
	<ui:include	src="/resources/components/dialogs/newPostDialog.xhtml" />
	<ui:include	src="/resources/components/dialogs/userDetailsData.xhtml" />
	<ui:include	src="/resources/components/dialogs/newDirectMessage.xhtml" />
	<ui:include	src="/resources/components/dialogs/peopleListDialog.xhtml" />
 
	
 
</h:body>

</html>