<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                template="templates/masterLayout2.xhtml"
                xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
>

<ui:define name="windowTitle">
	#{userEditBean1.isCreateUseCase() ? 'New' : 'Edit'} User
</ui:define>

<ui:define name="metadata">
	<f:metadata>
		<f:viewParam name="id" value="#{userEditBean1.id}" default="null" />
		<f:viewAction action="#{userEditBean1.init()}" />
	</f:metadata>
</ui:define>

<ui:define name="content">

    <div class="whiteBar">

    </div>

    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="whiteBox">
                    <h2>#{userEditBean1.isCreateUseCase() ? 'New' : 'Edit'} User</h2>
                    <h:form id="formMain">
                    	<p:growl id="growlMain" showDetail="true" globalOnly="true"></p:growl>
	                    <div class="formWrapper">
	                        <div class="formLine">
	                            <label>First name</label>
	                            <div class="formLineRight">
	                            	<h:inputText id="inputTextUserName" 
	                            		required="true" 
	                            		requiredMessage="First name is required"
	                            		value="#{userEditBean1.user.name}">
	                            	</h:inputText>
	                            	<h:panelGroup 
			                        	layout="block" 
			                        	rendered="#{not empty facesContext.getMessageList('formMain:inputTextUserName')}" 
			                        	styleClass="alert alert-danger" 
			                        	pt:role="alert">
			                            <h:message for="inputTextUserName"></h:message>
			                        </h:panelGroup>
	                            </div>
	                        </div>
	                        <div class="formLine">
	                            <label>Last name</label>
	                            <div class="formLineRight">
	                                <h:inputText id="inputTextUserLastname" 
	                                	required="true" 
	                                	requiredMessage="Last name is required"
	                                	value="#{userEditBean1.user.lastName}">
	                                </h:inputText>
	                                <h:panelGroup 
			                        	layout="block" 
			                        	rendered="#{not empty facesContext.getMessageList('formMain:inputTextUserLastname')}" 
			                        	styleClass="alert alert-danger" 
			                        	pt:role="alert">
			                            <h:message for="inputTextUserLastname"></h:message>
			                        </h:panelGroup>
	                            </div>
	                        </div>
	                        <div class="formLine">
	                            <label>Email</label>
	                            <div class="formLineRight">
	                            	<h:inputText id="inputTextUserEmail" 
	                            		required="true" 
	                            		requiredMessage="Email is required"
	                            		value="#{userEditBean1.user.email}"></h:inputText>
	                                <small>Email will not be publicly displayed.</small>
	                                <h:panelGroup 
			                        	layout="block" 
			                        	rendered="#{not empty facesContext.getMessageList('formMain:inputTextUserEmail')}" 
			                        	styleClass="alert alert-danger" 
			                        	pt:role="alert">
			                            <h:message for="inputTextUserEmail"></h:message>
			                        </h:panelGroup>
	                            </div>
	                        </div>
	                        <div class="formLine">
	                            <label>Position</label>
	                            <div class="formLineRight">
	                            	<h:inputText value="#{userEditBean1.user.position}"></h:inputText>
	                            </div>
	                        </div>
	                        <div class="formLine">
	                            <label>Role</label>
	                            <div class="formLineRight">
	                            	<h:selectManyCheckbox 
	                            		id="selectRoles"
										value="#{userEditBean1.user.roleIds}"
										layout="pageDirection"
										styleClass="checkbox checkLine" 
										required="true" 
										requiredMessage="At least one role should be selected">
										<f:selectItems value="#{userEditBean1.allRoles}" var="role"
                                                       itemValue="role" />
									</h:selectManyCheckbox>
									<h:panelGroup 
			                        	layout="block" 
			                        	rendered="#{not empty facesContext.getMessageList('formMain:selectRoles')}" 
			                        	styleClass="alert alert-danger" 
			                        	pt:role="alert">
			                            <h:message for="selectRoles"></h:message>
			                        </h:panelGroup>
	                            </div>
	                        </div>
	                        <div class="formLine">
	                            <label>Password</label>
	                            <div class="formLineRight">
	                                <p:password rendered="#{userEditBean1.isCreateUseCase()}"
	                                	id="inputPassword"
	                                	value="#{userEditBean1.user.password}"
	                                	required="true"
	                                	requiredMessage="Password field cannot be empty"
	                                	validatorMessage="Password is too short. It has to contain more that 5 characters.">
	                                	<f:validateLength minimum="6"></f:validateLength>
	                                </p:password>
	                                <h:panelGroup
			                        	layout="block" 
			                        	rendered="#{not empty facesContext.getMessageList('formMain:inputPassword')}" 
			                        	styleClass="alert alert-danger" 
			                        	pt:role="alert">
			                            <h:message for="inputPassword"></h:message>
			                        </h:panelGroup>
	                                <p:password rendered="#{!userEditBean1.isCreateUseCase()}"
	                                	id="inputPasswordEdit"
	                                	value="#{userEditBean1.user.password}"
	                                	validatorMessage="Password is too short. It has to contain more that 5 characters.">
	                                	<f:validateLength minimum="6"></f:validateLength>
	                                </p:password>
	                                <h:panelGroup
			                        	layout="block" 
			                        	rendered="#{not empty facesContext.getMessageList('formMain:inputPasswordEdit')}" 
			                        	styleClass="alert alert-danger" 
			                        	pt:role="alert">
			                            <h:message for="inputPasswordEdit"></h:message>
			                        </h:panelGroup>
	                              
	                            </div>
	                        </div>
	                        <div class="formLine">
	                            <label>&#160;</label>
	                            <div class="formLineRight">
	                                <p:commandLink 
	                                	styleClass="btn btn-green"
	                                	action="#{userEditBean1.saveUser()}"
	                                	update=":formMain">
	                                	Save Changes
	                                </p:commandLink>
	                            </div>
	                        </div>
	                    </div>
                 	</h:form>
                </div>
            </div>
        </div>
    </div>
	
	</ui:define>
</ui:composition>