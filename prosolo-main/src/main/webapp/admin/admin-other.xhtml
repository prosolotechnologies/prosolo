<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	template="templates/masterLayout2.xhtml"
	xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:util="http://www.prosolo.com/util"
	xmlns:courses="http://java.sun.com/jsf/composite/components/courses"
	xmlns:utilcomp="http://java.sun.com/jsf/composite/components/util">

	<ui:define name="windowTitle">
	ProSolo - Admin | Other
	</ui:define>

	<ui:define name="metadata">
		<f:metadata>
			<f:viewAction action="#{otherSettingsBean.init()}" />
		</f:metadata>
	</ui:define>

	<ui:define name="content">

		<div class="whiteBar"></div>

		<div class="container">
			<div class="row">
				<div class="col-md-12">
					<div class="whiteBox">
						<h2>Symptoms</h2>
						<div class="addSymtomForm">
							<h:form id="newSymptomForm">
								<p:growl id="symptomGrowl" showDetail="true" globalOnly="true"
									sticky="true" />

								<h:inputText id="newSymptomDesc" placeholder="Symptom name..."
									value="#{otherSettingsBean.newSymptom.description}"
									required="true" requiredMessage="Name is required"
									validator="#{otherSettingsBean.validateNewSymptomName}" />

								<p:commandLink pt:role="button" styleClass="btn btn-green"
									process="newSymptomDesc"
									actionListener="#{otherSettingsBean.saveSymptom()}" value="Add"
									update="@form :symptomForm :newSymptomForm">
								</p:commandLink>
							</h:form>
						</div>
						<h:form id="symptomForm">
							<table class="tableSymptoms">
								<tr>
									<th class="col1">Name</th>
									<th class="col2">&#160;</th>
								</tr>
								<ui:repeat var="symptom" value="#{otherSettingsBean.symptoms}"
									varStatus="symptomStatus">
									<tr class="#{symptomStatus.index % 2 eq 1 ? 'rowGrey' : ''}">
										<td class="col1"><h:outputText styleClass="name"
												value="#{symptom.description}" /></td>
										<td class="col2"><p:commandLink
												styleClass="btn btn-green-stroke btn-sm"
												pt:data-toggle="modal"
												action="#{otherSettingsBean.prepareSymptomEdit(symptom)}"
												oncomplete="$('#editSymptomModal').modal('show');">
					                    	Rename
					                     </p:commandLink> <a href="#" class="linkRed"
											data-toggle="modal" data-target="#deleteSymptom1">Delete</a>
											<div class="modal fade" id="deleteSymptom1" tabindex="-1"
												role="dialog" aria-labelledby="delSymptom1">
												<div class="modal-dialog" role="document">
													<div class="modal-content">
														<div class="modal-header">
															<button type="button" class="close" data-dismiss="modal"
																aria-label="Close">
																<span aria-hidden="true">&#215;</span>
															</button>
															<h2 class="modal-title" id="delSymptom1">Delete
																Symptom?</h2>
														</div>
														<div class="modal-body">
															<p>
																Are you sure you want to delete
																<h:outputText type="text" value="#{symptom.description}">
																</h:outputText>
																symptom? <BR /> <BR /> <small>Note: Action can
																	NOT be un-done!</small>
															</p>
														</div>
														<div class="modal-footer">
															<p:commandLink value="Delete" styleClass="btn btn-red"
																action="#{otherSettingsBean.deleteSymptom(symptom)}"
																update=":symptomForm"></p:commandLink>
															<a href="#" class="btn btn-default" data-dismiss="modal">Cancel</a>
														</div>
													</div>
												</div>
											</div></td>
									</tr>
								</ui:repeat>

							</table>
						</h:form>
						<div class="clear"></div>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="col-md-12">
					<div class="whiteBox">
						<h2>Suggestions</h2>
						<div class="addSuggestionForm">
							<form>
								<input type="text" placeholder="Suggestion name..."></input><a
									href="#" class="btn btn-green">Add</a>
							</form>
						</div>
						<table class="tableSymptoms">
							<tr>
								<th class="col1">Name</th>
								<th class="col2">&#160;</th>
							</tr>
							<tr class="rowGrey">
								<td class="col1">Suggestion name here</td>
								<td class="col2"><a href="#"
									class="btn btn-green-stroke btn-sm" data-toggle="modal"
									data-target="#renameSuggestion1">Rename</a>
									<div class="modal fade newFeedModal" id="renameSuggestion1"
										tabindex="-1" role="dialog" aria-labelledby="renSuggestion1">
										<div class="modal-dialog">
											<div class="modal-content">
												<div class="modal-header alignLeft">
													<button type="button" class="close" data-dismiss="modal"
														aria-label="Close">
														<span aria-hidden="true">&#215;</span>
													</button>
													<h2 class="modal-title">Rename Suggestion</h2>
												</div>
												<div class="modal-body alignLeft">
													<input type="text" value="Suggestion name here"></input>
												</div>
												<div class="modal-footer alignLeft">
													<a href="#" class="btn btn-green">Save</a> <a href="#"
														class="btn btn-default" data-dismiss="modal">Cancel</a>
												</div>
											</div>
										</div>
									</div> <a href="#" class="linkRed" data-toggle="modal"
									data-target="#deleteSuggestion1">Delete</a>
									<div class="modal fade" id="deleteSuggestion1" tabindex="-1"
										role="dialog" aria-labelledby="delSuggestion1">
										<div class="modal-dialog" role="document">
											<div class="modal-content">
												<div class="modal-header">
													<button type="button" class="close" data-dismiss="modal"
														aria-label="Close">
														<span aria-hidden="true">&#215;</span>
													</button>
													<h2 class="modal-title" id="delSuggestion1">Delete
														Suggestion?</h2>
												</div>
												<div class="modal-body">
													<p>
														Are you sure you want to delete suggestion 'Suggestion
														name here'? <BR /> <BR /> <small>Note: Action
															can NOT be un-done!</small>
													</p>
												</div>
												<div class="modal-footer">
													<a href="#" class="btn btn-red">Delete</a> <a href="#"
														class="btn btn-default" data-dismiss="modal">Cancel</a>
												</div>
											</div>
										</div>
									</div></td>
							</tr>
						</table>
						<div class="clear"></div>
					</div>
				</div>
			</div>
		</div>
		<h:form id="formEditSymptom">
			<div class="modal fade newFeedModal" id="editSymptomModal"
				tabindex="-1" role="dialog" aria-labelledby="newFeedSourceModal">
				<div class="modal-dialog">
					<h:panelGroup layout="block" id="panelSymptomContent"
						styleClass="modal-content">
						<ui:fragment>
							<div class="modal-header alignLeft">
								<button type="button" class="close" data-dismiss="modal"
									aria-label="Close">
									<span aria-hidden="true">&#215;</span>
								</button>
								<h2 class="modal-title">Rename Symptom</h2>
							</div>
							<div class="modal-body alignLeft">
								<h:inputText id="inputSymptomName"
									value="#{symptomForEdit.description}" required="true"
									requiredMessage="Name is required"></h:inputText>
								<h:panelGroup layout="block"
									rendered="#{not empty facesContext.getMessageList('formEditSymptom:inputSymptomName')}"
									styleClass="alert alert-danger" pt:role="alert">
									<h:message for="inputSymptomName"></h:message>
								</h:panelGroup>
							</div>
							<div class="modal-footer alignLeft">
								<p:commandLink styleClass="btn btn-green" value="Save"
									oncomplete="if (args &amp;&amp; !args.validationFailed)
									$('#editSymptomModal').modal('hide');"	
									action="#{otherSettingsBean.updateSymptom()}"
									update=":formEditSymptom:panelSymptomContent :symptomForm">
								</p:commandLink>
								<a href="#" class="btn btn-default" data-dismiss="modal">Cancel</a>
							</div>
						</ui:fragment>
					</h:panelGroup>
				</div>
			</div>
		</h:form>
		<courses:deleteModalDialog id="deleteSymptomModal"
			deleteActionMethodName="delete" deleteAction="#{otherSettingsBean.deleteSymptom()}"
			toUpdate=":symptomForm"
			modalDeleteTitle="symptom"
			modalDeleteText="symptom '#{symptomForEdit.description}'" />
	</ui:define>
</ui:composition>