<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	template="templates/masterLayout2.xhtml"
	xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:util="http://www.prosolo.com/util"
	xmlns:courses="http://java.sun.com/jsf/composite/components/courses"
	xmlns:utilcomp="http://java.sun.com/jsf/composite/components/util">

	<ui:define name="windowTitle">Create Admin</ui:define>

	<ui:define name="metadata">
		<f:metadata>
			<f:viewParam name="id" value="#{adminEditBean.id}" />
			<f:viewAction action="#{adminEditBean.init()}" />
		</f:metadata>
	</ui:define>


	<ui:define name="content">
		<p:growl id="growlMain" showDetail="true" globalOnly="true"></p:growl>
		<div class="whiteBar"></div>
		<div class="container">
	        <div class="row">
	            <div class="col-md-12">
	                <div class="whiteBox">
	                	<h2>New Admin</h2>
	                	<h:form id="formMain">
						<p:growl id="growlMain" showDetail="true" globalOnly="true"></p:growl>
		                    <div class="formWrapper">
		                        <div class="formLine">
		                            <label>First name</label>
		                            <div class="formLineRight">
		                                <h:inputText id="inputTextAdminName" required="true"
												requiredMessage="First name is required"
												value="#{adminEditBean.user.name}">
										</h:inputText>
										<h:panelGroup layout="block"
												rendered="#{not empty facesContext.getMessageList('formMain:inputTextAdminName')}"
												styleClass="alert alert-danger" pt:role="alert">
												<h:message for="inputTextAdminName"></h:message>
										</h:panelGroup>
		                            </div>
		                        </div>
		                        <div class="formLine">
		                            <label>Last name</label>
		                            <div class="formLineRight">
										<h:inputText id="inputTextAdminLastname" required="true"
											requiredMessage="Last name is required"
											value="#{adminEditBean.user.lastName}">
										</h:inputText>
										<h:panelGroup layout="block"
											rendered="#{not empty facesContext.getMessageList('formMain:inputTextAdminLastname')}"
											styleClass="alert alert-danger" pt:role="alert">
											<h:message for="inputTextAdminLastname"></h:message>
										</h:panelGroup>
									</div>
		                        </div>
		                        <div class="formLine">
									<label>Email</label>
									<div class="formLineRight">
										<h:inputText id="inputTextAdminEmail" required="true"
											name="emailAddress" requiredMessage="Email is required"
											value="#{adminEditBean.user.email}"></h:inputText>
										<small>Email will not be publicly displayed.</small>
										<h:panelGroup layout="block"
											rendered="#{not empty facesContext.getMessageList('formMain:inputTextAdminEmail')}"
											styleClass="alert alert-danger" pt:role="alert">
											<h:message for="inputTextAdminEmail"></h:message>
										</h:panelGroup>
									</div>
								</div>
		                        <div class="formLine">
		                            <label>Position</label>
		                            <div class="formLineRight">
		                                <h:inputText value="#{adminEditBean.user.position}"></h:inputText>
		                            </div>
		                        </div>
		                        <div class="formLine">
		                            <label>Role</label>
									<div class="formLineRight">
										<h:selectManyCheckbox id="selectRoles"
											value="#{adminEditBean.user.roleIds}" layout="pageDirection"
											styleClass="checkbox checkLine" required="true"
											requiredMessage="At least one role should be selected">
											<f:selectItems value="#{adminEditBean.allRoles}" var="role"
												itemValue="role" />
										</h:selectManyCheckbox>
										<h:panelGroup layout="block"
											rendered="#{not empty facesContext.getMessageList('formMain:selectRoles')}"
											styleClass="alert alert-danger" pt:role="alert">
											<h:message for="selectRoles"></h:message>
										</h:panelGroup>
									</div>
		                        </div>
		                        <div class="formLine">
		                            <label>&#160;</label>
		                            <div class="formLineRight">
		                                <p>Email with password setup instructions will be sent to user.</p>
		                            </div>
		                        </div>
		                        <div class="formLine">
		                            <label>&#160;</label>
		                            <div class="formLineRight">
		                            	<p:commandLink styleClass="btn btn-green" rendered="#{empty adminEditBean.id}" value="Create"
											action="#{adminEditBean.saveUser()}" update=":formMain">
										</p:commandLink>
										<p:commandLink styleClass="btn btn-green" rendered="#{not empty adminEditBean.id}" value="Edit"
													   action="#{adminEditBean.saveUser()}" update=":formMain">
										</p:commandLink>
		                            </div>
		                        </div>
		                    </div>
	                    </h:form>
	                </div>
	            </div>
	        </div>
	    </div>
	</ui:define>

</ui:composition>
