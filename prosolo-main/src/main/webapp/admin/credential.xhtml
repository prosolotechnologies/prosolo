<ui:composition xmlns="http://www.w3.org/1999/xhtml"
				xmlns:h="http://java.sun.com/jsf/html"
				xmlns:f="http://java.sun.com/jsf/core"
				xmlns:ui="http://java.sun.com/jsf/facelets"
				template="templates/masterLayout2.xhtml"
				xmlns:courses="http://java.sun.com/jsf/composite/components/courses"
				xmlns:admin="http://java.sun.com/jsf/composite/components/admin"
				xmlns:p="http://primefaces.org/ui"
				xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
				xmlns:c="http://java.sun.com/jsp/jstl/core">

	<ui:define name="windowTitle">
		#{msg['label.credential']} - #{credentialViewBeanAdmin.credentialData.title}
	</ui:define>

	<ui:define name="metadata">
		<f:metadata>
			<f:viewParam name="orgId" value="#{credentialViewBeanAdmin.orgId}" />
			<f:viewParam name="unitId" value="#{credentialViewBeanAdmin.unitId}" />
			<f:viewParam name="id" value="#{credentialViewBeanAdmin.id}" />
			<f:viewAction action="#{credentialViewBeanAdmin.init()}" />
		</f:metadata>
	</ui:define>

    <ui:define name="resourceTitle">
    	<h1>#{credentialViewBeanAdmin.credentialData.title}</h1>
    </ui:define>
    
    <ui:define name="navLinks">
		<admin:credentialsHeaderNavLinks
			id="headerNavLinks"
			credType="#{credentialViewBeanAdmin.credentialData.type}"
		/>
	</ui:define>
    
	<ui:define name="content">
		<script src="#{request.contextPath}/resources/javascript2/moment.min.js"></script>
		<script src="#{request.contextPath}/resources/javascript2/bootstrap-datetimepicker.min.js"></script>
		<script src="#{request.contextPath}/resources/javascript2/startDelivery.js"></script>

		<p:growl id="growlMain" globalOnly="true" showDetail="true"/>

		<ui:param name="learningContext" value="name:ORGANIZATION|id:#{util:decodeId(param.orgId)}|context:/name:UNIT|id:#{util:decodeId(param.unitId)}|context:/name:CREDENTIAL|id:#{util:decodeId(param.id)}//"/>

		<div class="whiteBar">
			<div class="container">
				<div class="whiteBarContent">
					<div class="whiteBarLeft">
						<c:if test="#{credentialViewBeanAdmin.original}">
							<p:commandLink styleClass="btn btn-green btn-sm item" pt:data-toggle="modal"
										   process="@this"
										   update="startDeliveryModal:formDeliveryStart:newDeliveryModalContent"
										   oncomplete="$('#newDeliveryModal').modal('show');">
								Start New #{msg['label.delivery']}
							</p:commandLink>
						</c:if>
					</div>
				</div>
			</div>
		</div>

		<div class="container">
			<ol class="breadcrumb">
				<li><h:link outcome="/admin/organizations">Organizations</h:link></li>
				<li>
					<h:link outcome="/admin/organization-settings">
						#{credentialViewBeanAdmin.organizationTitle}
						<f:param name="id" value="#{param.orgId}" />
					</h:link>
				</li>
				<li>
					<h:link outcome="/admin/units">
						Units
						<f:param name="id" value="#{param.orgId}" />
					</h:link>
				</li>
				<li>
					<h:link outcome="/admin/unit-credentials">
						#{credentialViewBeanAdmin.unitTitle}
						<f:param name="id" value="#{param.orgId}" />
						<f:param name="unitId" value="#{param.unitId}" />
					</h:link>
				</li>
				<li>
					<h:link outcome="/admin/unit-credentials">
						#{msg['label.credential.plural']}
						<f:param name="id" value="#{param.orgId}"/>
						<f:param name="unitId" value="#{param.unitId}"/>
					</h:link>
				</li>
				<li class="active">#{credentialViewBeanAdmin.credentialData.title}</li>
			</ol>
		</div>

		<courses:credentialContent
				bean="#{credentialViewBeanAdmin}"
				learningContext="#{learningContext}"
				role="ADMIN"
				growlToUpdate=":growlMain"
				startedLearning="false"
				readOnly="false"
		/>

		<c:if test="#{credentialViewBeanAdmin.original}">
			<courses:startDelivery
					id="startDeliveryModal"
					credentialId="#{credentialViewBeanAdmin.credentialData.id}"
					toUpdate=":growlMain"
					learningContext="#{learningContext}" />
		</c:if>
	</ui:define>
</ui:composition>
