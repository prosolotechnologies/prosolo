<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:dlg="http://java.sun.com/jsf/composite/components/admin/dialogs">

	<div id="orgFormContainer" class="content wide">

		<dlg:newOrganization id="newOrganization" />
		<dlg:editOrganization id="editOrganization" />

		<h:form id="organizationsForm" prependId="false">

			<p:commandButton id="newOrganizationBtn" value = "Add Organization" title="Add Organization"
				styleClass="button green size30"
				actionListener="#{organizations.prepareAdd}"
				onclick='$("#newOrganizationModalDialog").dialog("open");'
				type="button" />
				
			<p:dataTable id="organizationsDataTable" var="organization"
				value="#{organizations.organizations}" paginator="true" rows="10"
				paginatorTemplate="{FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}">
				<f:facet name="header">Organizations</f:facet>
				<ui:remove>
					<p:column>
						<f:facet name="header">
							<h:outputText value="URI" />
						</f:facet>
						<h:outputText value="#{organization.uri}" />
					</p:column>
				</ui:remove>
				<p:column>
					<f:facet name="header">
						<h:outputText value="Name" />
					</f:facet>
					<h:outputText value="#{organization.name}" />
				</p:column>

				<p:column>
					<f:facet name="header">
						<h:outputText value="Abbreviated Name" />
					</f:facet>
					<h:outputText value="#{organization.abbreviatedName}" />
				</p:column>

				<p:column>
					<f:facet name="header">
						<h:outputText value="Description" />
					</f:facet>
					<h:outputText value="#{organization.description}" />
				</p:column>
				<p:column>
					<f:facet name="header">
						<h:outputText value="Edit" />
					</f:facet>
					<p:commandButton type="push" title="Edit" icon="ui-icon-document"
						actionListener="#{organizations.prepareEdit}" 
						onclick='$("#editOrganizationModalDialog").dialog("open");'
						update=":editOrganizationForm :organizationsForm">
						<f:param name="id" value="#{organization.id}" />

					</p:commandButton>
				</p:column>
<ui:remove>
				<p:column>
					<f:facet name="header">
						<h:outputText value="Delete" />
					</f:facet>
					<p:commandButton type="push" title="Delete" icon="ui-icon-trash"
						update=":organizationsForm"
						actionListener="#{organizations.delete}">
						<f:param name="id" value="#{organization.id}" />

					</p:commandButton>
				</p:column>
</ui:remove>

			</p:dataTable>

		</h:form>

	</div>

</ui:composition>